System.register("chunks:///_virtual/app.ts",["cc","./NetworkManager.ts","./appComponents2.ts"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.networkManager},null],execute:function(){e({anchorLogin:function(e){return n.post("/user/anchorlogin",e)},checkGiftCode:function(e){return n.post("/user/check_gift_code",e)},getToken:function(e){return n.post("/user/getToken",e)},platformUserLogin:function(e){return n.post("/user/puserlogin",e)},savePlatformUser:function(e){return n.post("/user/save_platform_user",e)}}),t._RF.push({},"e12daWcw59CmqvnyLl1FuRH","app",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/App2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppConfig.ts","./live-custom.ts","./VirtualPageView.ts","./FloatTips.ts","./LoadingView.ts","./WaitingView.ts","./Logger.ts","./ScheduleManager.ts","./UIManager.ts"],(function(e){"use strict";var i,t,n,r,o,a,l,s,u,c,p,g,f,w,b,h,d,V,v,y,m,L;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){l=e.cclegacy,s=e._decorator,u=e.Node,c=e.JsonAsset,p=e.Label,g=e.Component,f=e.director},function(e){w=e.appConfig},null,function(e){b=e.VirtualPageView},function(e){h=e.FloatTips},function(e){d=e.LoadingView},function(e){V=e.WaitingView},function(e){v=e.Logger,y=e.LogLevel},function(e){m=e.scheduleManager},function(e){L=e.uiManager}],execute:function(){var P,z,A,_,j,D,I,M,R,k,E,F,T,x,C,N,S,B,H;l._RF.push({},"30a23p5jrJHqZ8RxhfV9mkB","App",void 0);var J=s.ccclass,W=s.property;e("App",(P=J("App"),z=W(u),A=W(h),_=W(d),j=W(V),D=W(c),I=W(p),M=W(p),R=W(b),P((F=i((E=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,n(i,"root",F,r(i)),n(i,"tips",T,r(i)),n(i,"loadingView",x,r(i)),n(i,"waitingView",C,r(i)),n(i,"version",N,r(i)),n(i,"errorLabel",S,r(i)),n(i,"versionLabel",B,r(i)),n(i,"rootPageView",H,r(i)),i}t(i,e);var l=i.prototype;return l.onLoad=function(){},l.start=function(){this.init()},l.init=function(){var e=o(a().mark((function e(){var i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.addPersistRootNode(this.node),m.init(this),L.init({sceneNode:this.root,pageView:this.rootPageView,tips:this.tips,waitingView:this.waitingView,loadingView:this.loadingView}),window.testPageView=function(){return i.rootPageView},this._version(),this.rootPageView.onInit();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l._onDanmuStart=function(e){w.roomId=e.openID},l._version=function(){var e=this;Object.keys(this.version.json).forEach((function(i){return w[i]=e.version.json[i]})),this.versionLabel.string="v"+w.version,"test"!==w.mode&&(v.LEVEL=y.Error)},i}(g)).prototype,"root",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(E.prototype,"tips",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=i(E.prototype,"loadingView",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(E.prototype,"waitingView",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(E.prototype,"version",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(E.prototype,"errorLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(E.prototype,"versionLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(E.prototype,"rootPageView",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=E))||k));l._RF.pop()}}}));

System.register("chunks:///_virtual/app3.ts",["cc","./NetworkManager.ts"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.networkManager}],execute:function(){t("getGameConfig",(function(t){return n.post("/config/games",t)})),e._RF.push({},"d73f1hZhehHv6GBLrQxKAFw","app",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/appComponents.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"7a79cMvpMhKuLGqlcoulQP+","appComponents",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/appComponents2.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"84e43ZkOlZLIJG7Av7Eovac","appComponents",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/AppConfig.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("Platform",void 0),e._RF.push({},"04eca3i+lFCM51rH6pqMqEU","AppConfig",void 0);var i;t("appConfig",{version:"0.0.1",gameID:"xxm103",remoteCfg:"",platform:"test",apiDomain:"https://live-test.q1.com",gameKey:"4dc86337e4c44c8f8249df04acb0fadb",roomId:"123",mode:"test"});!function(t){t[t.NONE=0]="NONE",t[t.DOU_YIN=1e3]="DOU_YIN",t[t.Bilibili=1002]="Bilibili",t[t.KUAI_SHOU=1001]="KUAI_SHOU"}(i||(i=t("Platform",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/AppConst.ts",["cc"],(function(t){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"22ac5GQ3htHf71lzr3T82cB","AppConst",void 0);t("GAME_FRAME",100);c._RF.pop()}}}));

System.register("chunks:///_virtual/AppEnum.ts",["cc"],(function(t){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){var n;t("SFX_TYPE",void 0),c._RF.push({},"0f0a1Z67t1AloJbNMljHlDk","AppEnum",void 0),function(t){t[t.BUTTON_CLICK=0]="BUTTON_CLICK",t[t.BUTTON_CLOSE=1]="BUTTON_CLOSE"}(n||(n=t("SFX_TYPE",{}))),c._RF.pop()}}}));

System.register("chunks:///_virtual/AppType.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"64417aNNGpPUKpCTvTGFDZm","AppType",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/atlas.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t.Texture2D}],execute:function(){i._RF.push({},"58f03tWp0NIPJYzIrictfn8","atlas",void 0);t("Atlas",function(){function t(t,e){this._texture=void 0,this._width=void 0,this._height=void 0,this._x=void 0,this._y=void 0,this._nexty=void 0,this._innerTextureInfos={},this._innerSpriteFrames=void 0,this._count=void 0;var i=new n;i.initWithSize(t,e),this._texture=i,this._width=t,this._height=e,this._x=2,this._y=2,this._nexty=2,this._innerTextureInfos={},this._innerSpriteFrames=[],this._count=0}var e=t.prototype;return e.insertSpriteFrame=function(t){var e=t.customizeMd5,i=t.rect,s=t.texture,n=this._innerTextureInfos[e||s.getId()],r=i.x,h=i.y;if(n)r+=n.x,h+=n.y;else{var o=s.width,u=s.height;if(this._x+o+2>this._width&&(this._x=2,this._y=this._nexty),this._y+u+2>this._nexty&&(this._nexty=this._y+u+2),this._nexty>this._height)return null;this._texture.drawTextureAt(s.image,this._x,this._y),this._innerTextureInfos[e||s.getId()]={x:this._x,y:this._y,texture:s},this._count++,r+=this._x,h+=this._y,this._x+=o+2}var f={x:r,y:h,texture:this._texture};return!n&&this._innerSpriteFrames.push(t),f},e.deleteInnerTexture=function(t,e){e&&this._innerTextureInfos[t||e.getId()]&&(delete this._innerTextureInfos[t||e.getId()],this._count--)},e.isEmpty=function(){return this._count<=0},e.reset=function(){this._x=2,this._y=2,this._nexty=2;for(var t=this._innerSpriteFrames,e=0,i=t.length;e<i;e++){var s=t[e];s.isValid&&s._resetDynamicAtlasFrame()}this._innerSpriteFrames.length=0,this._innerTextureInfos={}},e.destroy=function(){this.reset(),this._texture.destroy()},t}());var n=t("DynamicAtlasTexture",function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var s=i.prototype;return s.initWithSize=function(t,e,i){void 0===i&&(i=35),this.reset({width:t,height:e,format:i})},s.drawTextureAt=function(t,e,i){var s=this.getGFXTexture();if(t&&s){var n=this._getGFXDevice();if(n){var h=new r;h.texOffset.x=e,h.texOffset.y=i,h.texExtent.width=t.width,h.texExtent.height=t.height,n.copyTexImagesToTexture([t.data],s,[h])}else console.warn("Unable to get device")}},i}(s)),r=t("BufferTextureCopy",function(){function t(t,e,i,s,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=new h),void 0===n&&(n=new o),void 0===r&&(r=new u),this.buffOffset=t,this.buffStride=e,this.buffTexHeight=i,this.texOffset=s,this.texExtent=n,this.texSubres=r}return t.prototype.copy=function(t){return this.buffOffset=t.buffOffset,this.buffStride=t.buffStride,this.buffTexHeight=t.buffTexHeight,this.texOffset.copy(t.texOffset),this.texExtent.copy(t.texExtent),this.texSubres.copy(t.texSubres),this},t}()),h=t("Offset",function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i}return t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},t}()),o=t("Extent",function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),this.width=t,this.height=e,this.depth=i}return t.prototype.copy=function(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this},t}()),u=t("TextureSubresLayers",function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),this.mipLevel=t,this.baseArrayLayer=e,this.layerCount=i}return t.prototype.copy=function(t){return this.mipLevel=t.mipLevel,this.baseArrayLayer=t.baseArrayLayer,this.layerCount=t.layerCount,this},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioConfig.ts",["cc","./live-custom.ts"],(function(c){"use strict";var t;return{setters:[function(c){t=c.cclegacy},null],execute:function(){var i;c("AUDIO_ID",void 0),t._RF.push({},"4fcfeOxdPBJcqFciQQ2jfI5","AudioConfig",void 0),i||(i=c("AUDIO_ID",{})),t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceLoader.ts","./Logger.ts","./LocalStorageManager.ts"],(function(t){"use strict";var i,e,o,u,a,s,n,c;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,o=t.AudioSource,u=t.isValid},function(t){a=t.resourceLoader},function(t){s=t.logger},function(t){n=t.localStorageMgr,c=t.SAVE_TAG}],execute:function(){var l,r,h;t({AUDIO_STATE:void 0,MUSIC_STATE:void 0}),e._RF.push({},"a0ff6qrCyxFhaYIizjzMM5k","AudioManager",void 0),function(t){t[t.NONE=0]="NONE",t[t.NORMAL=1]="NORMAL"}(l||(l={})),function(t){t[t.OFF=0]="OFF",t[t.ON=1]="ON"}(r||(r=t("MUSIC_STATE",{}))),function(t){t[t.OFF=0]="OFF",t[t.ON=1]="ON"}(h||(h=t("AUDIO_STATE",{})));var _=function(){var t=e.prototype;function e(){this._currBGM=null,this._musicState=r.OFF,this._audioState=h.OFF,this._musicVolume=1,this._audioVolume=1,this._isPlaying=!1,this._music=null,this._sfx=null}return t.isPlaying=function(){return this._isPlaying},t.init=function(t,i){this._music=t,this._sfx=i,this._initMusicState(),this._initAudioState()},t._initMusicState=function(){var t;n.getLocalStorage(c.MUSIC_STATE)==r.OFF?(n.setLocalStorage(c.MUSIC_STATE,r.OFF),this._musicState=r.OFF):(n.setLocalStorage(c.MUSIC_STATE,r.ON),this._musicState=r.ON);var i=null!=(t=n.getLocalStorage(c.MUSIC_VOLUME))?t:1;n.setLocalStorage(c.MUSIC_VOLUME,i),this._musicVolume=i},t._initAudioState=function(){var t;n.getLocalStorage(c.AUDIO_STATE)==h.OFF?(n.setLocalStorage(c.AUDIO_STATE,h.OFF),this._audioState=h.OFF):(n.setLocalStorage(c.AUDIO_STATE,h.ON),this._audioState=h.ON);var i=null!=(t=n.getLocalStorage(c.AUDIO_VOLUME))?t:1;n.setLocalStorage(c.AUDIO_VOLUME,i),this._audioVolume=i},t._realPlay=function(t,i,e){this._music&&(this.isPlaying()&&this.stopMusic(),this._music.clip=t,this._music.volume=e,this._music.loop=null!=i&&i,this._music.play(),this._isPlaying=!0)},t.playMusic=function(t,i){var e=this;if(this._musicState!=r.OFF){var o=g.getConfig(t);this._currBGM=o;var u=this._musicState?o.volume||this._musicVolume:0,n=d.getAudioClip(o.url);n?this._realPlay(n,o.loop,u):a.load(o.url).then((function(t){d.putAudioClip(o.url,t),e._realPlay(t,o.loop,u)})).catch((function(t){s.error("Can not load sound for url = "+o.url+". err = "+t)}))}},t.stopMusic=function(){this._music.stop(),this._isPlaying=!1},t.pauseMusic=function(){this.isPlaying()&&this._music.state==o.AudioState.PLAYING&&this._music.pause()},t.resumeMusic=function(){this.isPlaying()&&this._music.state!=o.AudioState.PLAYING&&this._music.play()},t.playSfx=function(t,i){var e=this,o=g.getConfig(t);if(o){if(this._audioState==h.OFF||0==this._audioVolume)return;var u=o.volume||this._audioVolume,n=d.getAudioClip(o.url);n?(d.putAudioClip(o.url,n),this._realPlayEffect(null!=i?i:this._sfx,n,!1,u)):a.load(o.url).then((function(t){e._realPlayEffect(null!=i?i:e._sfx,t,!1,u)})).catch((function(t){s.error("Can not load sound for url = "+o.url+". err = "+t)}))}},t.play=function(t,i,e,o){var u=this;if(void 0===e&&(e=!1),this._audioState!=h.OFF&&0!=this._audioVolume){var n=o||this._audioVolume,c=d.getAudioClip(i);c?this._realPlayEffect(t,c,e,n):a.load(i).then((function(o){d.putAudioClip(i,o),u._realPlayEffect(t,o,e,n)})).catch((function(t){s.error("Can not load sound for url = "+i+". err = "+t)}))}},t._realPlayEffect=function(t,i,e,o){t.volume=o,t.loop=e||!1,t.playOneShot(i,1)},t.stopSfx=function(t){return!1},i(e,[{key:"musicState",set:function(t){this._musicState!=t&&(this._musicState=t,t==r.OFF?(this.stopMusic(),n.setLocalStorage(c.MUSIC_STATE,r.OFF)):(this.playMusic(this._currBGM.id,!0),n.setLocalStorage(c.MUSIC_STATE,r.ON))),this._musicState=t}},{key:"audioState",set:function(t){this._audioState!=t&&(this._audioState=t,t==h.OFF?n.setLocalStorage(c.AUDIO_STATE,h.OFF):n.setLocalStorage(c.AUDIO_STATE,h.ON)),this._audioState=t}},{key:"musicVolume",get:function(){var t;return null!=(t=this._musicVolume)?t:n.getLocalStorage(c.MUSIC_VOLUME)},set:function(t){t<0||t>1||(this._musicVolume=t,n.setLocalStorage(c.MUSIC_VOLUME,t),this._music.volume=t)}},{key:"audioStatus",get:function(){return{musicState:this._musicState,audioState:this._audioState,musicVolume:this._musicVolume,audioVolume:this._audioVolume}}},{key:"audioVolume",get:function(){var t;return null!=(t=this._audioVolume)?t:n.getLocalStorage(c.AUDIO_VOLUME)},set:function(t){t<0||t>1||(this._audioVolume=t,n.setLocalStorage(c.AUDIO_VOLUME,t),this._sfx.volume=t)}}]),e}(),f=function(){function t(){this._cache=null}var i=t.prototype;return i.getAudioClip=function(t){return t&&0!==t.length&&this._cache&&0!==this._cache.size?this._cache.get(t):null},i.putAudioClip=function(t,i){t&&(0!==t.length||u(i))&&(this._cache||(this._cache=new Map),this._cache.set(t,i))},i.clearByKey=function(t){this._cache&&0!==this._cache.size&&this._cache.has(t)&&(this._cache.delete(t),a.release(t))},i.clearAll=function(){this._cache&&0!==this._cache.size?(this._cache.forEach((function(t,i){a.release(i)})),this._cache.clear(),this._cache=null):this._cache=null},t}(),S=function(){function t(){this._audioInfo=new Map}var i=t.prototype;return i.getConfig=function(t){if(this._audioInfo.has(t))return this._audioInfo.get(t);console.warn("没有信息",t)},i.addConfig=function(t){return this._audioInfo.set(t.id,t),this},i.getAllConfig=function(){var t=[];return this._audioInfo.forEach((function(i){t.push(i)})),t},t}(),d=t("audioCache",new f),g=(t("audioManager",new _),t("audioConfig",new S));e._RF.pop()}}}));

System.register("chunks:///_virtual/base64.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"ad0d7ZOkoVE9pklngnlU1dB","base64",void 0);var r,e,o=t("version","3.7.2"),u=globalThis.Buffer||void 0,i=t("VERSION",o),c="function"==typeof atob,a="function"==typeof btoa,f="function"==typeof u,s="function"==typeof TextDecoder?new TextDecoder:void 0,d="function"==typeof TextEncoder?new TextEncoder:void 0,l=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),h=(r={},l.forEach((function(t,n){return r[t]=n})),r),A=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,y=String.fromCharCode.bind(String),b="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t,n){return void 0===n&&(n=function(t){return t}),new Uint8Array(Array.prototype.slice.call(t,0).map(n))},p=function(t){return t.replace(/=/g,"").replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"}))},g=function(t){return t.replace(/[^A-Za-z0-9\+\/]/g,"")},x=t("btoaPolyfill",(function(t){for(var n,r,e,o,u="",i=t.length%3,c=0;c<t.length;){if((r=t.charCodeAt(c++))>255||(e=t.charCodeAt(c++))>255||(o=t.charCodeAt(c++))>255)throw new TypeError("invalid character found");u+=l[(n=r<<16|e<<8|o)>>18&63]+l[n>>12&63]+l[n>>6&63]+l[63&n]}return i?u.slice(0,i-3)+"===".substring(i):u})),v=t("btoa",a?function(t){return btoa(t)}:f?function(t){return u.from(t,"binary").toString("base64")}:x),U=f?function(t){return u.from(t).toString("base64")}:function(t){for(var n=[],r=0,e=t.length;r<e;r+=4096)n.push(y.apply(null,t.subarray(r,r+4096)));return v(n.join(""))},B=t("fromUint8Array",(function(t,n){return void 0===n&&(n=!1),n?p(U(t)):U(t)})),C=function(t){if(t.length<2)return(n=t.charCodeAt(0))<128?t:n<2048?y(192|n>>>6)+y(128|63&n):y(224|n>>>12&15)+y(128|n>>>6&63)+y(128|63&n);var n=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return y(240|n>>>18&7)+y(128|n>>>12&63)+y(128|n>>>6&63)+y(128|63&n)},m=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,F=t("utob",(function(t){return t.replace(m,C)})),S=f?function(t){return u.from(t,"utf8").toString("base64")}:d?function(t){return U(d.encode(t))}:function(t){return v(F(t))},R=(t({toBase64:e=function(t,n){return void 0===n&&(n=!1),n?p(S(t)):S(t)},encode:e}),e),E=function(n){return t({encodeURI:n,encodeURL:n}),n}((function(t){return R(t,!0)})),w=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,D=function(t){switch(t.length){case 4:var n=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return y(55296+(n>>>10))+y(56320+(1023&n));case 3:return y((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return y((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},T=t("btou",(function(t){return t.replace(w,D)})),Z=t("atobPolyfill",(function(t){if(t=t.replace(/\s+/g,""),!A.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));for(var n,r,e,o="",u=0;u<t.length;)n=h[t.charAt(u++)]<<18|h[t.charAt(u++)]<<12|(r=h[t.charAt(u++)])<<6|(e=h[t.charAt(u++)]),o+=64===r?y(n>>16&255):64===e?y(n>>16&255,n>>8&255):y(n>>16&255,n>>8&255,255&n);return o})),z=t("atob",c?function(t){return atob(g(t))}:f?function(t){return u.from(t,"base64").toString("binary")}:Z),I=f?function(t){return b(u.from(t,"base64"))}:function(t){return b(z(t),(function(t){return t.charCodeAt(0)}))},P=t("toUint8Array",(function(t){return I(V(t))})),O=f?function(t){return u.from(t,"base64").toString("utf8")}:s?function(t){return s.decode(I(t))}:function(t){return T(z(t))},V=function(t){return g(t.replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})))},_=function(n){return t({fromBase64:n,decode:n}),n}((function(t){return O(V(t))})),L=t("isValid",(function(t){if("string"!=typeof t)return!1;var n=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(n)||!/[^\s0-9a-zA-Z\-_]/.test(n)})),j=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}},k=t("extendString",(function(){var t=function(t,n){return Object.defineProperty(String.prototype,t,j(n))};t("fromBase64",(function(){return _(this)})),t("toBase64",(function(t){return R(this,t)})),t("toBase64URI",(function(){return R(this,!0)})),t("toBase64URL",(function(){return R(this,!0)})),t("toUint8Array",(function(){return P(this)}))})),N=t("extendUint8Array",(function(){var t=function(t,n){return Object.defineProperty(Uint8Array.prototype,t,j(n))};t("toBase64",(function(t){return B(this,t)})),t("toBase64URI",(function(){return B(this,!0)})),t("toBase64URL",(function(){return B(this,!0)}))})),$=t("extendBuiltins",(function(){k(),N()}));t("Base64",{version:o,VERSION:i,atob:z,atobPolyfill:Z,btoa:v,btoaPolyfill:x,fromBase64:_,toBase64:R,encode:R,encodeURI:E,encodeURL:E,utob:F,btou:T,decode:_,isValid:L,fromUint8Array:B,toUint8Array:P,extendString:k,extendUint8Array:N,extendBuiltins:$});n._RF.pop()}}}));

System.register("chunks:///_virtual/BgAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,o,r,s,a,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.isValid,r=t.Widget,s=t.screen,a=t.UITransform,d=t.Component}],execute:function(){var c;n._RF.push({},"af9dauwFTZCWZowA8d4zWCw","BgAdapter",void 0);var u=i.ccclass;i.property,t("default",u("BgAdapter")(c=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onLoad=function(){if(o(this.node)){var t=this.node.getComponent(r);if(!t||!t.enabled){var e=s.windowSize.width/s.windowSize.height,n=this.node.getComponent(a);e>n.width/n.height&&(n.width=n.height*e)}}},n}(d))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/BilibiliSDK.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tools.ts","./EventCenter.ts","./NetworkManager.ts","./danmu.ts","./danmaku-websocket.min.mjs_cjs=&original=.js","./Logger.ts","./EventData2.ts","./danmaku-websocket.min.js"],(function(e){"use strict";var t,n,r,i,s,a,o,u,c,l,f;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){i=e.tools},function(e){s=e.eventCenter},function(e){a=e.networkManager},function(e){o=e.DanmuMessage,u=e.initToken},null,function(e){c=e.logger},function(e){l=e.EventID},function(e){f=e.default}],execute:function(){r._RF.push({},"9440bExP8VA57Lr84q8j173","BilibiliSDK",void 0);var p=e("BilibiliMessage",{Chat:"LIVE_OPEN_PLATFORM_DM",Gift:"LIVE_OPEN_PLATFORM_SEND_GIFT"});e("BilibiliSDK",function(){function e(e){this.ws=void 0,this.parsers={},this.anchor=void 0,this.cfg=e}var r=e.prototype;return r.init=function(e){return this.opts=e,a.onReceive(proto.sdk.bilibili.DanmuRoute.Push,proto.sdk.bilibili.PushMessage,this.pushMessage.bind(this)),this.parsers[p.Chat]=this.parseChat,this.parsers[p.Gift]=this.parseGift,this.parsers[o.Start]=this.parseStart,this},r.pushMessage=function(e){var t=this.parsers[e.pushType];t?t.call(this,JSON.parse(e.pushData)):s.fire(e.pushType,JSON.parse(e.pushData))},r.parseStart=function(e){var t=this,n=e.websocket_info,r=e.anchor_info;this.anchor={openID:""+r.uid,avatar:r.uface,nickname:r.uname,roomID:""+r.room_id};var i=n.auth_body,a=n.wss_link,u=a[0],l=a,p=JSON.parse(i);this.clearSocket(),this.ws=new f({url:u,urlList:l,customAuthParam:[{key:"key",value:p.key,type:"string"},{key:"group",value:p.group,type:"string"}],rid:p.roomid,protover:p.protover,uid:p.uid,onReceivedMessage:function(e){c.debug("收到弹幕消息：",e.cmd);var n=t.parsers[e.cmd];n&&n.call(t,e.data)},onHeartBeatReply:function(e){return c.debug("收到心跳回调",e)},onError:function(e){return c.error("error",e)},onListConnectError:function(){return t.closeDanmuSocket()}}),s.fire(o.Start,this.anchor)},r.clearSocket=function(){return!!this.ws&&(this.ws.destroy(),this.ws=null,!0)},r.closeDanmuSocket=function(){c.debug("弹幕连接关闭"),this.clearSocket()&&s.fire(o.Stop)},r.start=function(){var e=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.queryParams(),r=t.code){e.next=5;break}return s.fire(l.SHOW_ERROR_INFO,"参数错误: "+JSON.stringify(t)),e.abrupt("return",!1);case 5:return e.next=7,u(this.opts.gameID,this.opts.platform,{code:r,appID:""+this.cfg.appID,akID:this.cfg.akID});case 7:if(e.sent){e.next=11;break}return s.fire(l.SHOW_ERROR_INFO,"初始化token失败"),e.abrupt("return",!1);case 11:return e.next=13,a.websocketConnect(this.cfg.danmu+"/"+a.Token);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.parseChat=function(e){var t,n;s.fire(o.Chat,{openID:""+e.uid,avatar:e.uface,nickname:e.uname,content:String(e.msg),level:null!=(t=e.guard_level)?t:0,fansLevel:null!=(n=e.fans_medal_level)?n:0,isMaster:""+e.uid===this.anchor.openID})},r.parseGift=function(e){var t,n,r,i;s.fire(o.Gift,{openID:""+e.uid,avatar:e.uface,nickname:e.uname,giftID:e.gift_id,giftNum:null!=(t=e.gift_num)?t:1,level:null!=(n=e.guard_level)?n:0,fansLevel:null!=(r=e.fans_medal_level)?r:0,diamond:null!=(i=e.price)?i:0,isMaster:""+e.uid===this.anchor.openID})},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Browser.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventData2.ts","./EventCenter.ts","./danmu.ts"],(function(t){"use strict";var n,e,r,i,s,o,u;return{setters:[function(t){n=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){r=t.cclegacy},function(t){i=t.EventID},function(t){s=t.eventCenter},function(t){o=t.DanmuMessage,u=t.initToken}],execute:function(){r._RF.push({},"08b91LRBLxN3qJAHR2glx86","Browser",void 0);t("Browser",function(){function t(){this.anchor={openID:"1111",nickname:"test",avatar:"",roomID:"1111"}}t.registerCmd=function(){window[o.Chat]=function(t){return s.fire(o.Chat,Object.assign({isMaster:"1111"==t.openID},t))},window[o.Gift]=function(t){return s.fire(o.Gift,Object.assign({isMaster:"1111"==t.openID},t))},window[o.Like]=function(t){return s.fire(o.Like,t)}};var r=t.prototype;return r.init=function(n){return this.opts=n,t.registerCmd(),this},r.start=function(){var t=n(e().mark((function t(){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(this.opts.gameID,this.opts.platform);case 2:return(n=t.sent)?s.fire(o.Start,this.anchor):s.fire(i.SHOW_ERROR_INFO,"初始化token失败"),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonExt.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,r,c,u,l,a,s,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,u=t.Button,l=t.Enum,a=t.AudioSource,s=t.isValid,p=t.Component}],execute:function(){var f,d,h,C,y,k,b,T,_,m,E;t("SFX_TYPE",void 0),r._RF.push({},"5fcf7T92JdEpY90nLe7+Ros","ButtonExt",void 0);var v,B=c.ccclass,g=c.property,L=c.requireComponent,A=c.disallowMultiple,O=c.menu;!function(t){t[t.BUTTON_CLICK=0]="BUTTON_CLICK",t[t.BUTTON_CLOSE=1]="BUTTON_CLOSE"}(v||(v=t("SFX_TYPE",{})));t("default",(f=B("ButtonExt"),d=L(u),h=O("自定义组件/ButtonExt"),C=g({displayName:"最小点击间隔"}),y=g({displayName:"按钮声音",tooltip:"按钮点击提示音",type:l(v),visible:function(){return this.clickAudio}}),k=g({displayName:"点击音效"}),f(b=A(b=d(b=h((_=i((T=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return i=t.call.apply(t,[this].concat(r))||this,n(i,"clickDuration",_,o(i)),n(i,"clickSound",m,o(i)),n(i,"clickAudio",E,o(i)),i}e(i,t);var r=i.prototype;return r.onLoad=function(){var t=this;!this.node.getComponent(a)&&this.node.addComponent(a),this.node.on(u.EventType.CLICK,(function(){t._afterClick(),t._playClickAudioEffect()}))},r.onDestroy=function(){this.unscheduleAllCallbacks(),this.node.targetOff(this)},r._afterClick=function(){var t=this.node.getComponent(u);s(t)&&this.clickDuration>0&&t.interactable&&(t.interactable=!1,this.scheduleOnce((function(){t.interactable=!0}),this.clickDuration))},r._playClickAudioEffect=function(){this.clickAudio},i}(p)).prototype,"clickDuration",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),m=i(T.prototype,"clickSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.BUTTON_CLICK}}),E=i(T.prototype,"clickAudio",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=T))||b)||b)||b)||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkManager.ts"],(function(r){"use strict";var n,t,e,a;return{setters:[function(r){n=r.asyncToGenerator,t=r.regeneratorRuntime},function(r){e=r.cclegacy},function(r){a=r.networkManager}],execute:function(){e._RF.push({},"acad08CgJJO5rnthU7rTAYh","ConfigManager",void 0);r("configManager",new(function(){function r(){this._cfgCache={}}var e=r.prototype;return e.init=function(){var r=n(t().mark((function r(n){var e,c,u=this;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.httpSend(n);case 2:if(e=r.sent){r.next=5;break}return r.abrupt("return",!1);case 5:return c=JSON.parse(e),Object.keys(c).forEach((function(r){return u._cfgCache[r]=c[r]})),r.abrupt("return",!0);case 8:case"end":return r.stop()}}),r)})));return function(n){return r.apply(this,arguments)}}(),e.getCfgMap=function(r,n){var t=this.getCfgArray(r),e={};return t.forEach((function(r){e[r[n]]=r})),e},e.getCfgArray=function(r){return this._cfgCache[r]},r}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/CrashReport.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./md5.ts","./SdkManager.ts"],(function(){"use strict";var t,n,r,i,e,s,o;return{setters:[function(r){t=r.asyncToGenerator,n=r.regeneratorRuntime},function(t){r=t.cclegacy,i=t.sys},function(t){e=t.logger},function(t){s=t.hex_md5},function(t){o=t.sdkManager}],execute:function(){r._RF.push({},"b100eXx9ExBk6GhO5VpCL2r","CrashReport",void 0);var u=function(){function t(){this.detail=void 0,this.os=void 0,this.time=void 0,this.logs=void 0}var n=t.prototype;return n.init=function(t,n){var r=this;this.detail={res_version:"0.0.1",message:t,stacks:[]},null!=n&&""!=n&&n.split("\n").forEach((function(t){if(!(r.detail.stacks.length>=10)){for(var n=t.split("@"),i=[],e=0;e<n.length;++e){if(0==e)n[e].split(":").forEach((function(t){return i.push(t)}));else i.push(n[e])}r.detail.stacks.push(i)}})),this.os=i.os,this.time=Date.now()},n.md5=function(){return s(JSON.stringify(this.detail))},t}(),a={};function c(t){return l.apply(this,arguments)}function l(){return(l=t(n().mark((function t(r){var i,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.md5(),e.log("report bug","md5 val is",s),!(null!=a[s]&&a[s]+6e8>r.time)){t.next=5;break}return e.log("report bug","same bug in 10 min, return"),t.abrupt("return");case 5:a[s]=r.time,e.log("report bug","start upload bug"),null==(i=o.thinking)||i.track("error",{bugID:s,bug:JSON.stringify(r)});case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}i.isNative?window.__errorHandler=function(t,n,r,i){var e=new u;e.init(r,i),c(e)}:window.onerror=function(t,n,r,i,e){var s=new u,o=e&&e.stack?e.stack:"",a="";a=t instanceof String?t:JSON.stringify(t),s.init(a,o),c(s)},r._RF.pop()}}}));

System.register("chunks:///_virtual/danmu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts","./NetworkManager.ts"],(function(e){"use strict";var t,n,r,o,a;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){o=e.getToken},function(e){a=e.networkManager}],execute:function(){e({DMTongji:void 0,initToken:function(e,t,n){return p.apply(this,arguments)}}),r._RF.push({},"865d6V0cmhEIonrdYagQHP/","danmu",void 0);var u,c,i,l;e("DanmuMessage",{Start:"start",Stop:"stop",Chat:"chat",Gift:"gift",Like:"like"});function p(){return(p=t(n().mark((function e(t,r,u){var c,i,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={gameID:t,platform:r},i=Object.assign({},c),u&&(Object.keys(u).forEach((function(e){return i[e]=u[e]})),c.payload=u),a.setSign(i),e.next=6,o(c).catch((function(e){return console.error(e)}));case 6:if(l=e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return a.setHeaderToken(l.access_token),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c=u||(u=e("DMTongji",{})),i={count:0,people:new Set},l={count:0,people:new Set},c.addValidRecord=function(e){l.count++,l.people.add(e)},c.addTotalRecord=function(e){i.count++,i.people.add(e)},c.getValidCount=function(){return l.count},c.getValidPopulation=function(){return l.people.size},c.getValidPlayerID=function(){return Array.from(l.people)},c.getTotalCount=function(){return i.count},c.getTotalPopulation=function(){return i.people.size},c.getTotalPlayerID=function(){return Array.from(i.people)},c.clearTotal=function(){i.count=0,i.people.clear()},c.clearValid=function(){l.count=0,l.people.clear()},c.clearAll=function(){this.clearValid(),this.clearTotal()},r._RF.pop()}}}));

System.register("chunks:///_virtual/DouyinSDK.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkManager.ts","./danmu.ts","./Tools.ts","./app.ts","./EventCenter.ts","./EventData2.ts","./Logger.ts","./ElectronAPI.ts"],(function(t){"use strict";var n,e,o,r,s,a,i,u,c,f,h;return{setters:[function(t){n=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){r=t.networkManager},function(t){s=t.DanmuMessage},function(t){a=t.tools},function(t){i=t.anchorLogin},function(t){u=t.eventCenter},function(t){c=t.EventID},function(t){f=t.logger},function(t){h=t.ElectronAPI}],execute:function(){o._RF.push({},"f0b69L4NktMN67izMUGSlLv","DouyinSDK",void 0);t("DouyinSDK",function(){function t(t){this.parsers={},this.cfg=t}var o=t.prototype;return o.init=function(t){return this.opts=t,r.onReceive(proto.sdk.douyin.DanmuRoute.Push,proto.sdk.douyin.PushMessage,this.onPushMessage.bind(this)),r.onReceive(proto.sdk.douyin.DanmuRoute.Danmu,proto.sdk.douyin.DanmuDataList,this.onDanmuList.bind(this)),this.parsers[proto.sdk.douyin.DanmuRoute.Chat]=this.onDanmuChat.bind(this),this.parsers[proto.sdk.douyin.DanmuRoute.Gift]=this.onDanmuGift.bind(this),this.parsers[proto.sdk.douyin.DanmuRoute.Like]=this.onDanmuLike.bind(this),h.onMessage("live-connected",(function(){return u.fire(c.NETWORK_CONNECTED)})),h.onMessage("live-error",(function(){return u.fire(c.NETWORK_ERROR)})),h.onMessage("live-closed",(function(){return u.fire(c.NETWORK_CLOSED)})),h.onMessage("live-danmu",(function(t,n){r.websocketSendOperate(0,a.strToUnit8Array(n))})),this},o.onPushMessage=function(t){t&&u.fire(t.pushType,JSON.parse(t.pushData))},o.onDanmuList=function(t){var n=this;t&&(f.debug("收到弹幕数据长度："+t.data.length),t.data.forEach((function(t){var e=n.parsers[t.route];e&&e(t.data)})))},o.onDanmuChat=function(t){var n=proto.sdk.douyin.ChatData.decode(t);f.debug("弹幕数据：",n.content),u.fire(s.Chat,Object.assign({isMaster:n.displayID==this.anchor.shortID},n))},o.onDanmuGift=function(t){var n=proto.sdk.douyin.GiftData.decode(t);f.debug("礼物数据：",n.giftID),u.fire(s.Gift,Object.assign({isMaster:n.displayID==this.anchor.shortID},n))},o.onDanmuLike=function(t){var n=proto.sdk.douyin.LikeData.decode(t);f.debug("点赞数据：",n.count,n.total),u.fire(s.Like,n)},o.start=function(){var t=n(e().mark((function t(){var n,o,h,d,p,D,g,m,k,l;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a.queryParams(),f.debug("启动参数：",o),h=o.account,d=o.password,p=o.roomID,D=o.shortID,h&&d){t.next=9;break}return u.fire(c.SHOW_ERROR_INFO,"参数错误: "+JSON.stringify(o)),t.abrupt("return",!1);case 9:return this.opts.roomID=p,this.anchor={openID:h,nickname:"",avatar:"",roomID:p,shortID:D},t.next=13,i({account:h,password:d,platform:proto.platform.PlatformID.Douyin,gameID:this.opts.gameID,appID:this.cfg.appID}).catch((function(t){return console.error(t)}));case 13:if(g=t.sent){t.next=17;break}return u.fire(c.SHOW_ERROR_INFO,"登录失败，请确认小玩法已启动"),t.abrupt("return",!1);case 17:if(!g.code){t.next=20;break}return u.fire(c.SHOW_ERROR_INFO,"登录错误"+(g.msg||g.code)),t.abrupt("return",!1);case 20:return(m=JSON.parse(null!=(n=g.msg)?n:'""'))&&m.userID&&(this.anchor.openID=m.userID),r.setHeaderToken(g.access_token),k=this.cfg.danmu+"/"+r.Token,t.next=26,r.websocketConnect(k);case 26:return(l=t.sent)&&u.fire(s.Start,this.anchor),t.abrupt("return",l);case 29:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/DynamicAtlasLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./md5.ts","./DynamicAtlasMgr.ts"],(function(t){"use strict";var e,a,i,n,l,r,s,c,o,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,s=t.Label,c=t.LabelOutline},function(t){o=t.hex_md5},function(t){m=t.dynamicAtlasMgr}],execute:function(){var u,y,p,f,d;l._RF.push({},"0f8b22nwstP7JA/1qdeJ3w8","DynamicAtlasLabel",void 0);var A=r.ccclass,h=r.property;t("DynamicAtlasLabel",(u=A("DynamicAtlasLabel"),y=h({tooltip:"自定义合图名,不为空即为开启"}),u((d=e((f=function(t){function e(){for(var e,a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,i(e,"dynamicAtlasName",d,n(e)),e}return a(e,t),e.prototype._flushAssembler=function(){if(t.prototype._flushAssembler.call(this),!m.dynamicAtlasInit){m.dynamicAtlasInit=!0;var e=this._assembler._calDynamicAtlas;this._assembler._calDynamicAtlas=function(t){if(t.dynamicAtlasName){if(t.cacheMode!==s.CacheMode.BITMAP)return;var a=t.string+t.color+t.node.scale+t.overflow+t.isBold,i=t.getComponent(c);i&&(a+=i.color,a+=i.width);var n=o(a),l=t.ttfSpriteFrame;l.customizeMd5=n,m.packToDynamicAtlas(t.dynamicAtlasName,l)}else e(t)}}},e}(s)).prototype,"dynamicAtlasName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=f))||p));l._RF.pop()}}}));

System.register("chunks:///_virtual/DynamicAtlasMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./atlas.ts"],(function(t){"use strict";var e,a,i,n,s,r,l,o,u,c,h,d,m,_,p,f,y;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy,i=t._decorator,n=t.macro,s=t.js,r=t.find,l=t.Node,o=t.ScrollView,u=t.UITransform,c=t.Size,h=t.view,d=t.Layout,m=t.Layers,_=t.Sprite,p=t.SpriteFrame,f=t.Vec3},function(t){y=t.Atlas}],execute:function(){var A,g;t("Filter",void 0),a._RF.push({},"7aac7VhOVpNQJT41HCpnO4d","DynamicAtlasMgr",void 0);var x,C=i.ccclass,S=(i.property,t("DynamicAtlasMgr",C("DynamicAtlasMgr")(((g=function(){function t(){this._atlasesMap=new Map,this._atlasIndex=-1,this._maxAtlasCount=5,this._textureSize=2048,this._maxFrameSize=512,this._textureBleeding=!0,this._dynamicAtlasInit=!1,this._enabled=!0}var a=t.prototype;return a.newAtlas=function(t){var e=this._atlasesMap[t];return e||(e=new y(this._textureSize,this._textureSize),this._atlasesMap.set(t,e)),e},a.beforeSceneLoad=function(){this.reset()},a.init=function(){this.enabled=!n.CLEANUP_IMAGE_CACHE},a.insertSpriteFrame=function(t,e){if(!this._enabled||this._atlasIndex===this._maxAtlasCount||!e||e._original)return null;if(!e.packable)return null;var a=e.texture.getSamplerInfo();if(a.minFilter!==x.LINEAR||a.magFilter!==x.LINEAR||a.mipFilter!==x.NONE)return null;var i=this._atlasesMap.get(t);return i||(i=this.newAtlas(t)),i.insertSpriteFrame(e)},a.reset=function(){this._atlasesMap.forEach((function(t){t.destroy()})),this._atlasesMap.clear(),this._atlasIndex=-1},a.deleteAtlas=function(t){t&&this._atlasesMap.has(t)&&(this._atlasesMap.get(t).destroy(),this._atlasesMap.delete(t))},a.deleteAtlasSpriteFrame=function(t){t._original&&(this._atlasesMap.forEach((function(e){s.array.fastRemove(e._innerSpriteFrames,t)})),this.deleteAtlasTexture(t))},a.deleteAtlasTexture=function(t){var e=this,a=t._original._texture;a&&this._atlasesMap.forEach((function(i,n){i.deleteInnerTexture(t.customizeMd5,a),i.isEmpty()&&(i.destroy(),e._atlasesMap.delete(n))}))},a.packToDynamicAtlas=function(t,e){if(e&&!e._original&&e.packable&&e.texture&&e.texture.width>0&&e.texture.height>0){var a=this.insertSpriteFrame(t,e);a&&e._setDynamicAtlasFrame(a)}},a.showDynamicAtlas=function(){var t=r("Canvas");t.removeChild(t.getChildByName("dynamicAtlas"));var e=new l("dynamicAtlas"),a=e.addComponent(o);e.getComponent(u).setContentSize(new c(h.getVisibleSize().width,h.getVisibleSize().height));var i=new l("CONTENT"),n=i.addComponent(d);i.parent=e,i.getComponent(u).anchorY=1,i.getComponent(u).setContentSize(new c(2048,2048*this._atlasesMap.size)),n.resizeMode=d.ResizeMode.CONTAINER,n.type=d.Type.VERTICAL,a.content=i,a.horizontal=!0,a.vertical=!0,e.layer=m.Enum.UI_2D,this._atlasesMap.forEach((function(t,e){var a=new l("atlas"),n=a.addComponent(_);a.layer=m.Enum.UI_2D;var s=new p;s.texture=t._texture,n.spriteFrame=s,i.addChild(a)})),r("Canvas").addChild(e),e.setPosition(new f(0,0,0))},a.hideDynamicAtlas=function(){var t=r("Canvas");t.getChildByName("dynamicAtlas")&&(t.getChildByName("dynamicAtlas").active=!1)},e(t,[{key:"dynamicAtlasInit",get:function(){return this._dynamicAtlasInit},set:function(t){this._dynamicAtlasInit!==t&&(this._dynamicAtlasInit=t)}},{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled!==t&&(this.reset(),this._enabled=t)}},{key:"maxAtlasCount",get:function(){return this._maxAtlasCount},set:function(t){this._maxAtlasCount=t}},{key:"atlasCount",get:function(){return this._atlasesMap.size}},{key:"textureBleeding",get:function(){return this._textureBleeding},set:function(t){this._textureBleeding=t}},{key:"textureSize",get:function(){return this._textureSize},set:function(t){this._textureSize=t}},{key:"maxFrameSize",get:function(){return this._maxFrameSize},set:function(t){this._maxFrameSize=t}}]),t}()).instance=void 0,A=g))||A));!function(t){t[t.NONE=0]="NONE",t[t.LINEAR=2]="LINEAR",t[t.NEAREST=1]="NEAREST"}(x||(x=t("Filter",{})));t("dynamicAtlasMgr",S.instance=new S);a._RF.pop()}}}));

System.register("chunks:///_virtual/ElectronAPI.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"0879dJT14BCt4NkKLEZpcMo","ElectronAPI",void 0);var t=window.electron;e("ElectronAPI",function(){function e(){}return e.ipcSend=function(e){if(t){for(var n,i=arguments.length,c=new Array(i>1?i-1:0),o=1;o<i;o++)c[o-1]=arguments[o];(n=t.ipcRenderer).send.apply(n,[e].concat(c))}},e.ipcSendSync=function(e){if(t){for(var n,i=arguments.length,c=new Array(i>1?i-1:0),o=1;o<i;o++)c[o-1]=arguments[o];return(n=t.ipcRenderer).sendSync.apply(n,[e].concat(c))}return null},e.center=function(){this.ipcSend("e_center")},e.fullScreen=function(){this.ipcSend("e_fullScreen")},e.window=function(){this.ipcSend("e_window")},e.openDevTools=function(){this.ipcSend("e_openDevTools")},e.closeDevTools=function(){this.ipcSend("e_closeDevTools")},e.setSize=function(e,n){this.ipcSend("e_setSize",e.toString(),n.toString())},e.setResolution=function(e,n){this.ipcSend("e_setResolution",e.toString(),n.toString())},e.isFullScreen=function(){return this.ipcSendSync("e_isFullScreen")},e.setScreenResolution=function(e,n){this.isFullScreen()?this.setResolution(e,n):this.setSize(e,n)},e.nircmdUD=function(e){this.ipcSend("e_nircmdUD",e)},e.getMassage=function(){return this.ipcSendSync("e_getMassage")},e.getAllResolutions=function(){return this.ipcSendSync("e_getAllResolutions")},e.getCurrentResolution=function(){return this.ipcSendSync("e_getCurrentResolution")},e.quit=function(){this.ipcSend("e_quit")},e.onClose=function(e){t&&(t.ipcRenderer.removeListener("electronClosed",e),t.ipcRenderer.on("electronClosed",e))},e.onMessage=function(e,n){t?t.ipcRenderer.on(e,n):console.warn("不是electron环境")},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/EventCenter.ts",["cc","./Logger.ts"],(function(e){"use strict";var r,t;return{setters:[function(e){r=e.cclegacy},function(e){t=e.logger}],execute:function(){r._RF.push({},"4be74CymQ9OPqr8Z8YXTFwE","EventCenter",void 0);e("eventCenter",new(function(){function e(){this._handlers={},this._currHandlers={},this._handlers={},this._currHandlers={}}var r=e.prototype;return r._exist=function(e,r){for(var t=-1,n=0;n<e.length;n++)e[n].target==r&&(t=n);return t},r._removeOne=function(e,r){var t=this._exist(e,r);return t>=0&&(e.splice(t,1),!0)},r.register=function(e,r,t){var n="number"==typeof e?e.toString():e,i=this._handlers[n]||[];this._handlers[n]=i,-1==this._exist(i,r)&&i.push({callback:t,target:r})},r.unregister=function(e,r){if(null!=e&&null!=r){var n="number"==typeof e?e.toString():e,i=this._handlers[n];if(i){if(this._removeOne(i,r)){var l=this._currHandlers[n];l&&(this._removeOne(l,r),0==l.length&&delete this._currHandlers[n])}0==i.length&&delete this._handlers[e]}}else t.error("EventCenter","unregister a null eventid or target. ignore.")},r.unregisterAll=function(e){if(null!=e)for(var r in this._handlers)this.unregister(r,e);else t.error("EventCenter","unregister all for a null target. ignore.")},r.fire=function(e){if(null!=e){var r="number"==typeof e?e.toString():e,n=this._handlers[r];if(null!=n){var i=n.slice(0);this._currHandlers[r]=i;for(var l=arguments.length,s=new Array(l>1?l-1:0),a=1;a<l;a++)s[a-1]=arguments[a];for(var u=i.length-1;u>=0;--u){var o=i[u];if(o.target&&o.callback)try{var c=[];s&&(c=c.concat(s)),o.callback.apply(o.target,c)}catch(e){t.error("EventCenter","fireEvent error = ",e)}}this._currHandlers[r]=null}}else t.error("EventCenter","fire a null eventid. ignore.")},e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/EventData.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"68629yJvupFLbhfrJ+Mu4yR","EventData",void 0);var c=0;t("EventID",{GAME_TEST:++c,SERVER_KICK_USER:"kick_user"});e._RF.pop()}}}));

System.register("chunks:///_virtual/EventData2.ts",["cc"],(function(R){"use strict";var O;return{setters:[function(R){O=R.cclegacy}],execute:function(){O._RF.push({},"ad0e1vLu7RNwJrWxX3S5pKv","EventData",void 0);R("EventID",{SHOW_ERROR_INFO:"SHOW_ERROR_INFO",NETWORK_CONNECTED:"NETWORK_CONNECTED",NETWORK_CLOSED:"NETWORK_CLOSED",NETWORK_ERROR:"NETWORK_ERROR",KILL_ROOM:"kill_room"});O._RF.pop()}}}));

System.register("chunks:///_virtual/FloatTips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemTips.ts"],(function(t){"use strict";var i,e,n,o,r,s,a,c,l,h,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.isValid,l=t.instantiate,h=t.Component},function(t){p=t.ItemTips}],execute:function(){var u,f,_,d,v;r._RF.push({},"9a5a8yH5dVJ3rGm7j9q2jT+","FloatTips",void 0);var m=s.ccclass,T=s.property;t("FloatTips",(u=m("FloatTips"),f=T(a),u((v=i((d=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"nodeItem",v,o(i)),i._contentList=[],i._lastShowTime=0,i._tipArr=[],i}e(i,t);var r=i.prototype;return r.onLoad=function(){this.nodeItem.active=!1},r.show=function(t,i){void 0===i&&(i=0),this._contentList.push({content:t,extraDelay:i})},r.update=function(){this._checkShow(),this._clearNullNode()},r._clearNullNode=function(){var t=this._tipArr.length;if(!(t<=0))for(var i=0;i<t;i++){var e=this._tipArr[i];if(!c(e)){this._tipArr.splice(i,1);break}}},r._checkShow=function(){if(0!=this._contentList.length&&Date.now()-this._lastShowTime>=.4){var t=l(this.nodeItem);this.node.addChild(t);var i=t.getComponent(p),e=this._contentList.shift();i.show(null==e?void 0:e.content,null==e?void 0:e.extraDelay),this._checkOtherTips(),this._tipArr.push(t),this._lastShowTime=Date.now()}},r._checkOtherTips=function(){var t=this._tipArr.length;if(!(t<=0))for(var i=0;i<t;i++){var e=this._tipArr[i];if(c(e))e.getComponent(p).moveDown()}},i}(h)).prototype,"nodeItem",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=d))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/FSMachine.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"7a900P6SuhDhoSnYapv9NXY","FSMachine",void 0);t("FSMachine",function(){function t(t,e){this.curState=void 0,this.isEnter=!1,this.states=t,this.target=e}var e=t.prototype;return e.isState=function(t){var e;return(null==(e=this.curState)?void 0:e.name)===t},e.getState=function(){var t,e;return null!=(t=null==(e=this.curState)?void 0:e.name)?t:""},e.addState=function(t){var e=this.states.findIndex((function(e){return e.name===t.name}));-1!==e&&this.states.splice(e,1),this.states.push(t)},e.setState=function(t){var e;if((null==(e=this.curState)?void 0:e.name)!==t){var n;if(this.curState)null==(n=this.curState.onExit)||n.call(this.target),this.curState=null;var a=this.states.find((function(e){return e.name===t}));if(a){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];this.curState=Object.assign({},a,{params:s}),this.isEnter=!1}}},e.update=function(t){var e,n;this.curState&&(this.isEnter?null==(e=this.curState.onUpdate)||e.call(this.target,t):(this.isEnter=!0,null==(n=this.curState.onEnter)||n.call.apply(n,[this.target].concat(this.curState.params))))},e.clearState=function(){this.curState=null,this.states.length=0},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Game1View.ts",["./rollupPluginModLoBabelHelpers.js","cc","./live-custom.ts","./ViewBaseComponent.ts"],(function(e){"use strict";var t,n,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator},null,function(e){i=e.ViewBaseComponent}],execute:function(){var r;n._RF.push({},"8ef38OwHTBEhZgYwAZ5irne","Game1View",void 0);var c=o.ccclass;o.property,e("Game1View",c("Game1View")(r=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.onInit=function(){console.log("我是游戏1")},o.deInit=function(){},n}(i))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game2View.ts",["./rollupPluginModLoBabelHelpers.js","cc","./live-custom.ts","./ViewBaseComponent.ts"],(function(e){"use strict";var t,n,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator},null,function(e){i=e.ViewBaseComponent}],execute:function(){var r;n._RF.push({},"4582eXPU6tHIpiwr5SpJxdp","Game2View",void 0);var c=o.ccclass;o.property,e("Game2View",c("Game2View")(r=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.onInit=function(){console.log("我是游戏2")},o.deInit=function(){},n}(i))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfigManager.ts",["cc","./live-custom.ts","./ConfigManager.ts"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.cclegacy},null,function(n){e=n.configManager}],execute:function(){var i;n("GameConfigName",void 0),t._RF.push({},"609e59lt85N075Wg7x0n4a0","GameConfigManager",void 0),function(n){n.GAMECONSTCONFIG="GameConstConfig"}(i||(i=n("GameConfigName",{})));n("gameCfgManager",new(function(){function n(){this.GameConstConfig=void 0,this.GameConstConfigMap=void 0}return n.prototype.init=function(){this.GameConstConfig=e.getCfgArray(i.GAMECONSTCONFIG),this.GameConstConfigMap=e.getCfgMap(i.GAMECONSTCONFIG,"ID")},n}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/HeartBeat.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"554e6NizwtMbKNKqDNioseP","HeartBeat",void 0);t("default",function(){function t(){this._timeOut=3e3,this._timer=void 0,this._delayTimeOut=5e3,this._delayTimer=void 0,this._name=void 0}var e=t.prototype;return e.init=function(t,e,i){this._name=t,this._timeOut=e,this._delayTimeOut=i},e.start=function(t,e){var i=this;this.close(),this._timer=setTimeout((function(){t&&t(),i._delayTimer=setTimeout((function(){e&&e()}),i._delayTimeOut)}),this._timeOut),console.log(this._name+" start heart beat")},e.close=function(){this._timer&&clearTimeout(this._timer),this._delayTimer&&clearTimeout(this._delayTimer)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRequest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(e){"use strict";var t,n,r,o;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){o=e.Logger}],execute:function(){r._RF.push({},"15245xWwJ1F76en6RZmpOEu","HttpRequest",void 0);var u=new o("HttpRequest"),s=e("default",function(){function e(){}return e.prototype.request=function(){var e=t(n().mark((function e(t,r,o,s,i,a){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s=!1),void 0===i&&(i=!1),e.abrupt("return",new Promise((function(e,n){if(r=r||{},!s){var c=!0;for(var p in r)c?(t=t+"?"+p+"="+r[p],c=!1):t=t+"&"+p+"="+r[p]}var T=new XMLHttpRequest;if(T.open(s?"POST":"GET",t,!0),a)for(var f=Object.keys(a),H=0;H<f.length;H++)T.setRequestHeader(f[H],a[f[H]]);i&&T.setRequestHeader("Accept-Encoding","gzip"),s&&T.setRequestHeader("Content-Type","application/json"),T.timeout=o||1e4,T.ontimeout=function(){return n("timeout")},T.onerror=function(){return n("onerror("+T.status+")")},T.onabort=function(){return n("abort")},T.onreadystatechange=function(){4==T.readyState&&(200!=T.status&&n(T.responseText||"network error"),u.debug(t,T.status),e(T.responseText))},s?T.send(JSON.stringify(r)):T.send()})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,o,u,s){return e.apply(this,arguments)}}(),e}());s.HTTP_METHOD_GET="GET",s.HTTP_METHOD_POST="POST",s.HTTP_METHOD_PUT="PUT",s.HTTP_METHOD_DELETE="DELETE",r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemPage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,r,a,o,l,s,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,l=e._decorator,s=e.Node,u=e.Sprite,c=e.Label,p=e.Component}],execute:function(){var d,f,g,_,b,h,I,m,y;o._RF.push({},"8e1feL8PfVAHoehsVDZIC50","ItemPage",void 0);var v=l.ccclass,x=l.property;e("ItemPage",(d=v("ItemPage"),f=x(s),g=x(u),_=x(c),d((I=t((h=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"nd_parent",I,r(t)),i(t,"sp_bg",m,r(t)),i(t,"lb_pageIndex",y,r(t)),t._itemIndex=0,t._data=null,t}n(t,e);var o=t.prototype;return o.removeUI=function(){this.sp_bg.node.active=!1},o.initUI=function(){this._data&&(this.sp_bg.node.active=!0)},a(t,[{key:"itemIndex",get:function(){return this._itemIndex},set:function(e){this._itemIndex=e,this.lb_pageIndex&&(this.lb_pageIndex.string="我是页面"+(e+1))}},{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.initUI()}}]),t}(p)).prototype,"nd_parent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(h.prototype,"sp_bg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(h.prototype,"lb_pageIndex",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/ItemTips.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,n,s,r,a,c,h,p,l,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.RichText,c=t.UITransform,h=t.UIOpacity,p=t.Vec3,l=t.tween,u=t.Tween,d=t.Component}],execute:function(){var y,f,_,g,v;s._RF.push({},"eba49ynrVFBwrtxVWHo+Xes","ItemTips",void 0);var m=r.ccclass,w=r.property,T=.2;t("ItemTips",(y=m("ItemTips"),f=w(a),y((v=e((g=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"lbContent",v,n(e)),e.isMoveDown=!1,e._startTime=0,e._speed=5,e._targetPosY=360,e._targetGap=80,e._scaleFinish=!1,e}i(e,t);var s=e.prototype;return s.show=function(t,e){var i=this;void 0===e&&(e=0),this.node.active=!0,this.lbContent&&(this.lbContent.string=t),this._targetPosY=this.node.position.y,this._targetGap=this.node.getComponent(c).height+10,this.node.getComponent(h).opacity=0,this.node.setScale(new p(0,0,0)),this._startTime=Date.now(),l(this.node.getComponent(h)).to(T,{opacity:255}).delay(2).to(T,{opacity:0}).start(),l(this.node).by(T,{scale:new p(1,1,1)}).call((function(){i._scaleFinish=!0})).delay(2.2+e).call((function(){i.node.destroy()})).start()},s.update=function(t){if(this.isMoveDown&&this._scaleFinish){if(Date.now()-this._startTime>=2200)return void this.node.destroy();if(u.stopAllByTarget(this.node),this.node.position.y<=this._targetPosY)return;var e=this.node.position.y;e-=this._speed,this.node.setPosition(this.node.position.x,e)}},s.moveDown=function(){this.isMoveDown=!0,this._targetPosY-=this._targetGap},e}(d)).prototype,"lbContent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=g))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/KuaishouSDK.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tools.ts","./EventCenter.ts","./NetworkManager.ts","./danmu.ts","./EventData2.ts"],(function(t){"use strict";var e,r,n,s,a,i,o,u,c;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){n=t.cclegacy},function(t){s=t.tools},function(t){a=t.eventCenter},function(t){i=t.networkManager},function(t){o=t.DanmuMessage,u=t.initToken},function(t){c=t.EventID}],execute:function(){n._RF.push({},"f3fd7mxfBtM4pEBaprhoMcY","KuaishouSDK",void 0);var f=t("KuaishouMessage",{Chat:"liveComment",Gift:"giftSend"});t("KuaishouSDK",function(){function t(t){this.parsers={},this.anchor=void 0,this.cfg=t}var n=t.prototype;return n.init=function(t){return this.opts=t,i.onReceive(proto.sdk.kuaishou.DanmuRoute.Push,proto.sdk.kuaishou.PushMessage,this.onPushMsg.bind(this)),this.parsers[f.Chat]=this.parseChat,this.parsers[f.Gift]=this.parseGift,this.parsers[o.Start]=this.parseStart,this},n.start=function(){var t=e(r().mark((function t(){var e,n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.queryParams(),n=e.code){t.next=5;break}return a.fire(c.SHOW_ERROR_INFO,"参数错误: "+JSON.stringify(e)),t.abrupt("return",!1);case 5:return t.next=7,u(this.opts.gameID,this.opts.platform,{appID:this.cfg.appID,code:n,playID:""+this.cfg.playID});case 7:if(t.sent){t.next=11;break}return a.fire(c.SHOW_ERROR_INFO,"初始化token失败"),t.abrupt("return",!1);case 11:return o=i.Token,t.next=14,i.websocketConnect(this.cfg.danmu+"/"+o);case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.onPushMsg=function(t){var e=this.parsers[t.pushType];if(e){var r=null;try{r=JSON.parse(t.payload)}catch(e){return void console.error("反序列化数据错误",t.pushType,t.payload)}e.call(this,r)}},n.parseStart=function(t){this.anchor=t,a.fire(o.Start,this.anchor)},n.parseChat=function(t){a.fire(o.Chat,{openID:""+t.userInfo.userId,avatar:t.userInfo.headUrl,nickname:t.userInfo.userName,message:t.content})},n.parseGift=function(t){a.fire(o.Gift,{openID:""+t.userInfo.userId,avatar:t.userInfo.headUrl,nickname:t.userInfo.userName,giftID:t.giftId})},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/live-custom.ts",["cc","./LiveGame.ts","./SdkManager.ts","./danmu.ts","./EventCenter.ts","./FloatTips.ts","./UIManager.ts","./ScheduleManager.ts","./NetworkManager.ts","./Tools.ts","./UIConfig2.ts","./SpriteLoader.ts","./Logger.ts","./ViewBaseComponent.ts","./UIGridView.ts","./ConfigManager.ts","./NodePool.ts","./Preloaders2.ts","./StepWork.ts","./ResourceLoader.ts","./LoadingView.ts","./WaitingView.ts","./LocalStorageManager.ts","./DynamicAtlasMgr.ts","./AudioManager.ts"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy},function(n){var o={};o.LiveEvent=n.LiveEvent,o.liveGame=n.liveGame,e(o)},function(n){e("sdkManager",n.sdkManager)},function(n){var o={};o.DMTongji=n.DMTongji,o.DanmuMessage=n.DanmuMessage,o.initToken=n.initToken,e(o)},function(n){e("eventCenter",n.eventCenter)},function(n){e("FloatTips",n.FloatTips)},function(n){e("uiManager",n.uiManager)},function(n){e("scheduleManager",n.scheduleManager)},function(n){e("networkManager",n.networkManager)},function(n){e("tools",n.tools)},function(n){var o={};o.UI_CACHE=n.UI_CACHE,o.UI_LOADING=n.UI_LOADING,o.uiConfig=n.uiConfig,e(o)},function(n){e("SpriteLoader",n.SpriteLoader)},function(n){var o={};o.LogLevel=n.LogLevel,o.Logger=n.Logger,o.logger=n.logger,e(o)},function(n){e("ViewBaseComponent",n.ViewBaseComponent)},function(n){e("UIGridView",n.UIGridView)},function(n){e("configManager",n.configManager)},function(n){e("NodePool",n.NodePool)},function(n){var o={};o.preloadNodePool=n.preloadNodePool,o.preloadSpines=n.preloadSpines,o.preloadUIPrefab=n.preloadUIPrefab,e(o)},function(n){e("StepWork",n.StepWork)},function(n){e("resourceLoader",n.resourceLoader)},function(n){e("LoadingView",n.LoadingView)},function(n){e("WaitingView",n.WaitingView)},function(n){var o={};o.SAVE_TAG=n.SAVE_TAG,o.localStorageMgr=n.localStorageMgr,e(o)},function(n){var o={};o.DynamicAtlasMgr=n.DynamicAtlasMgr,o.Filter=n.Filter,o.dynamicAtlasMgr=n.dynamicAtlasMgr,e(o)},function(n){var o={};o.AUDIO_STATE=n.AUDIO_STATE,o.MUSIC_STATE=n.MUSIC_STATE,o.audioCache=n.audioCache,o.audioConfig=n.audioConfig,o.audioManager=n.audioManager,e(o)}],execute:function(){n._RF.push({},"13a7chtRRhNB5JR7eXCro2E","live-custom",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/LiveGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app3.ts","./ConfigManager.ts","./EventCenter.ts","./EventData2.ts","./Logger.ts","./UIManager.ts","./ScheduleManager.ts","./ElectronAPI.ts","./NetworkManager.ts","./danmu.ts","./SdkManager.ts","./Tools.ts"],(function(t){"use strict";var e,n,r,o,i,a,s,u,c,f,g,l,h,m,p,d,v;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t.game},function(t){i=t.getGameConfig},function(t){a=t.configManager},function(t){s=t.eventCenter},function(t){u=t.EventID},function(t){c=t.logger},function(t){f=t.uiManager},function(t){g=t.scheduleManager},function(t){l=t.ElectronAPI},function(t){h=t.networkManager},function(t){m=t.DMTongji,p=t.DanmuMessage},function(t){d=t.sdkManager},function(t){v=t.tools}],execute:function(){r._RF.push({},"5af2bR3k4dBlb5B9qXkEnTd","LiveGame",void 0);var D=t("LiveEvent",{Start:"live-start",Over:"live-over"});t("liveGame",new(function(){function t(){this.isFirst=!0,this.isConnecting=!1,this.reconnectInterval=null}var r=t.prototype;return r.getPlatform=function(t){switch(t){case"douyin":return proto.platform.PlatformID.Douyin;case"bilibili":return proto.platform.PlatformID.Bilibili;case"kuaishou":return proto.platform.PlatformID.Kuaishou;default:return proto.platform.PlatformID.Null}},r.onStart=function(t){var e;null==(e=d.thinking)||e.gameStart(t.openID)},r.onStop=function(){var t;null==(t=d.thinking)||t.gameStop(),s.fire(D.Over)},r.onQuit=function(t){this.onStop(),f.showMessageBox({content:t.msg,titleStr:"提示"}),g.scheduleOnce((function(){return l.quit()}),t.second)},r.onChat=function(t){m.addTotalRecord(t.openID)},r.onGift=function(t){var e;null==(e=d.thinking)||e.track("Gift",{audienceID:t.openID,itemID:t.giftID,itemNum:t.giftNum})},r.showErrorMessage=function(t){c.error(t),f.showMessageBox({titleStr:"错误提示",content:t})},r.onMessageConnected=function(){c.debug("网络已连接"),f.showTips("网络已连接")},r.onMessageClosed=function(){c.warn("网络链接断开, 正在尝试重连..."),f.showTips("网络链接断开, 正在尝试重连...")},r.onMessageError=function(){f.showMessageBox({content:"重连失败，请确定网络状态，重启游戏",titleStr:"提示",leftStr:"确定",leftCallback:function(){o.end()}})},r.init=function(){var t=e(n().mark((function t(e){var r,o,c,f,g,m,D,M=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.getPlatform(e.platform),s.register(p.Start,this,this.onStart),s.register(p.Chat,this,this.onChat),s.register(p.Gift,this,this.onGift),s.register(u.KILL_ROOM,this,this.onQuit),s.register(u.NETWORK_CONNECTED,this,this.onMessageConnected),s.register(u.NETWORK_CLOSED,this,this.onMessageClosed),s.register(u.NETWORK_ERROR,this,this.onMessageError),s.register(u.SHOW_ERROR_INFO,this,this.showErrorMessage),l.onClose((function(){return M.onStop()})),h.init({apiDomain:e.apiDomain,gameID:e.gameID,platform:o,gameKey:e.gameKey,maxRetry:3}),c={gameID:e.gameID,platform:e.platform,mode:e.mode},h.setSign(c),t.next=15,i(c);case 15:if(f=t.sent){t.next=19;break}return this.showErrorMessage("解析启动配置失败, 网络错误"),t.abrupt("return",!1);case 19:if(g=JSON.parse(null!=(r=f.config)?r:'""')){t.next=23;break}return this.showErrorMessage("获取启动配置失败, 返回config为空"),t.abrupt("return",!1);case 23:return Object.assign(e,g),h.reset({apiDomain:e.apiDomain}),d.init(e,{platform:o,gameID:e.gameID}),m=v.urlIncluded("audit")?"audit.json":"game_config_client.json",t.next=29,a.init(e.remoteCfg+"/"+e.platform+"/"+m+"?"+Date.now());case 29:return(D=t.sent)||this.showErrorMessage("获取游戏配置失败"),t.abrupt("return",D);case 32:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.start=function(){var t=e(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.danmu.start();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){var r;e._RF.push({},"99a92YkuRtOtL+iDzisZKdH","LoadingView",void 0);var c=n.ccclass;n.property,t("LoadingView",c("LoadingView")(r=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.show=function(t){this.node.active=!0,t&&t()},n.hide=function(){this.node.active=!1},e}(o))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalStorageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./ScheduleManager.ts"],(function(t){"use strict";var e,c,a,s,u;return{setters:[function(t){e=t.createClass},function(t){c=t.cclegacy,a=t.sys},function(t){s=t.logger},function(t){u=t.scheduleManager}],execute:function(){c._RF.push({},"b0b52IwfsBEK6NMfr3movB9","LocalStorageManager",void 0);var n={removeItem:function(){},setItem:function(){},getItem:function(){},clear:function(){}};t("SAVE_TAG",{MUSIC_VOLUME:"MUSIC_VOLUME",AUDIO_VOLUME:"AUDIO_VOLUME",MUSIC_STATE:"MUSIC_STATE",AUDIO_STATE:"AUDIO_STATE"}),t("localStorageMgr",new(function(){function t(){this._account="",this._userData=null,this._commCache=null,this._cacheQueue=null,this._schedulerID=null,this._cacheQueue=new Map,this._commCache=new Map,this._setAccount()}var c=t.prototype;return c._setAccount=function(){this._account=this.getLocalStorage("account")||"account_null"},c._setUserData=function(){if(this._checkAccount()){var t=this._getItem(this._account)||null;if(t)try{this._userData=JSON.parse(t)}catch(t){this._userData={}}else this._userData={}}},c._storeUserData=function(){if(this._checkAccount()){var t=JSON.stringify(this._userData);this._setItem(this._account,t)}},c._checkAccount=function(){return!(!this._account&&(this._setAccount(),!this._account))||(s.error("LocalStorageManager","account is not exist"),!1)},c.setLocalStorage=function(t,e){this._commCache.set(""+t,e);var c="string"==typeof e?e:JSON.stringify(e);this._setItem(""+t,c)},c.getLocalStorage=function(t){var e;if(this._commCache.has(""+t))return this._commCache.get(""+t);var c=this._getItem(t);if(c)try{e=JSON.parse(c),this._commCache.set(""+t,e)}catch(t){e=null}return e},c.removeLocalStorage=function(t){this._commCache.has(""+t)&&this._commCache.delete(""+t),this.localStorage.removeItem(t+"")},c.clearLocalStorage=function(){this.localStorage.clear()},c.setAccountStorage=function(t,e){this._userData||this._setUserData(),this._userData&&(this._userData[t]=e,this._storeUserData())},c.getAccountStorage=function(t){return this._userData&&null!=this._userData[t]?this._userData[t]:null},c.removeAccountStorage=function(t){this._userData&&null!=this._userData[t]&&(delete this._userData[t],this._storeUserData())},c._setItem=function(t,e){this._cacheQueue.set(t,e),null==this._schedulerID&&this._save()},c._getItem=function(t){return this.localStorage.getItem&&this.localStorage.getItem(t+"")||null},c._save=function(){var t=this;this._cacheQueue&&0!=this._cacheQueue.size&&(this._schedulerID=u.schedule((function(){if(!t._cacheQueue||0==t._cacheQueue.size)return t._schedulerID&&u.unschedule(t._schedulerID),void(t._schedulerID=null);var e=t._cacheQueue.entries().next(),c=e.value[0],a=e.value[1];t._cacheQueue.delete(c),t.localStorage.setItem(c,a)}),0))},e(t,[{key:"localStorage",get:function(){try{if(a&&a.localStorage)return a.localStorage}catch(t){}return n}},{key:"account",get:function(){return this._account},set:function(t){this._account=t,this._setUserData()}}]),t}()));c._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var r,o;return{setters:[function(n){r=n.createClass},function(n){o=n.cclegacy}],execute:function(){var e;n("LogLevel",void 0),o._RF.push({},"9a1b7x/2YpJBqxKFrO+Ydfo","Logger",void 0),function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error"}(e||(e=n("LogLevel",{})));var t=e.Debug,a=n("Logger",function(){function n(n){this.name=n}var o=n.prototype;return o.debug=function(){if(n.LEVEL<=e.Debug){for(var r,o=arguments.length,t=new Array(o),a=0;a<o;a++)t[a]=arguments[a];(r=console).log.apply(r,[this.name].concat(t))}},o.info=function(){if(n.LEVEL<=e.Info){for(var r,o=arguments.length,t=new Array(o),a=0;a<o;a++)t[a]=arguments[a];(r=console).info.apply(r,[this.name].concat(t))}},o.warn=function(){if(n.LEVEL<=e.Warn){for(var r,o=arguments.length,t=new Array(o),a=0;a<o;a++)t[a]=arguments[a];(r=console).warn.apply(r,[this.name].concat(t))}},o.error=function(){if(n.LEVEL<=e.Error){for(var r,o=arguments.length,t=new Array(o),a=0;a<o;a++)t[a]=arguments[a];(r=console).error.apply(r,[this.name].concat(t)),window.onerror&&window.onerror(this.name+"|"+t.join(","))}},o.log=function(){for(var n,r=arguments.length,o=new Array(r),e=0;e<r;e++)o[e]=arguments[e];return(n=console).log.apply(n,[this.name].concat(o)),this},r(n,null,[{key:"LEVEL",get:function(){return t},set:function(n){t=n}}]),n}());n("logger",new a("Logger"));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./App2.ts","./AppConfig.ts","./AppConst.ts","./AppEnum.ts","./AppType.ts","./PackageTools.ts","./EventData.ts","./AudioConfig.ts","./NodePool2.ts","./Preloaders.ts","./UIConfig.ts","./GameConfigManager.ts","./live-custom.ts","./ModelBase.ts","./OperationBase.ts","./MainScene.ts","./Game1View.ts","./Game2View.ts","./LiveGame.ts","./app3.ts","./appComponents.ts","./app.ts","./appComponents2.ts","./AudioManager.ts","./ConfigManager.ts","./FSMachine.ts","./LocalStorageManager.ts","./ScheduleManager.ts","./SkeletonManager.ts","./StepWork.ts","./BgAdapter.ts","./ButtonExt.ts","./FloatTips.ts","./ItemPage.ts","./ItemTips.ts","./LoadingView.ts","./MessageBoxView.ts","./UIGridView.ts","./UIScrollSelect.ts","./VirtualPageView.ts","./WaitingView.ts","./WatcherComponent.ts","./WatcherHelper.ts","./DynamicAtlasLabel.ts","./DynamicAtlasMgr.ts","./atlas.ts","./EventCenter.ts","./EventData2.ts","./Logger.ts","./CrashReport.ts","./NodePool.ts","./Preloaders2.ts","./RefCount.ts","./ResourceLoader.ts","./ResourcePreloader.ts","./UIConfig2.ts","./UIManager.ts","./ViewBaseComponent.ts","./SpriteLoader.ts","./UIHelper.ts","./ElectronAPI.ts","./base64.ts","./md5.ts","./protobuf.min.mjs_cjs=&original=.js","./protobuf_live.mjs_cjs=&original=.js","./HeartBeat.ts","./HttpRequest.ts","./NetworkManager.ts","./WebsocketRequest.ts","./SdkManager.ts","./BilibiliSDK.ts","./danmaku-websocket.min.mjs_cjs=&original=.js","./Browser.ts","./danmu.ts","./DouyinSDK.ts","./KuaishouSDK.ts","./ThinkingSDK.ts","./thinkingdata.mg.cocoscreator.min.mjs_cjs=&original=.js","./Tools.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./live-custom.ts","./ViewBaseComponent.ts"],(function(e){"use strict";var n,t,i,r,o,a,c,s;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.PageView},null,function(e){s=e.ViewBaseComponent}],execute:function(){var u,l,p,f,v;o._RF.push({},"ef3a0E3iSpIPaepVoV1I4f9","MainScene",void 0);var y=a.ccclass,g=a.property;e("MainScene",(u=y("MainScene"),l=g(c),u((v=n((f=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"pageview",v,r(n)),n}t(n,e);var o=n.prototype;return o.onInit=function(){},o.onRelease=function(){},n}(s)).prototype,"pageview",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/md5.ts",["cc"],(function(r){"use strict";var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){r("hex_md5",(function(r){return function(r){for(var n="0123456789abcdef",t="",u=0;u<4*r.length;u++)t+=n.charAt(r[u>>2]>>u%4*8+4&15)+n.charAt(r[u>>2]>>u%4*8&15);return t}(function(r,n){r[n>>5]|=128<<n%32,r[14+(n+64>>>9<<4)]=n;for(var t=1732584193,i=-271733879,a=-1732584194,h=271733878,s=0;s<r.length;s+=16){var v=t,d=i,g=a,l=h;t=u(t,i,a,h,r[s+0],7,-680876936),h=u(h,t,i,a,r[s+1],12,-389564586),a=u(a,h,t,i,r[s+2],17,606105819),i=u(i,a,h,t,r[s+3],22,-1044525330),t=u(t,i,a,h,r[s+4],7,-176418897),h=u(h,t,i,a,r[s+5],12,1200080426),a=u(a,h,t,i,r[s+6],17,-1473231341),i=u(i,a,h,t,r[s+7],22,-45705983),t=u(t,i,a,h,r[s+8],7,1770035416),h=u(h,t,i,a,r[s+9],12,-1958414417),a=u(a,h,t,i,r[s+10],17,-42063),i=u(i,a,h,t,r[s+11],22,-1990404162),t=u(t,i,a,h,r[s+12],7,1804603682),h=u(h,t,i,a,r[s+13],12,-40341101),a=u(a,h,t,i,r[s+14],17,-1502002290),t=e(t,i=u(i,a,h,t,r[s+15],22,1236535329),a,h,r[s+1],5,-165796510),h=e(h,t,i,a,r[s+6],9,-1069501632),a=e(a,h,t,i,r[s+11],14,643717713),i=e(i,a,h,t,r[s+0],20,-373897302),t=e(t,i,a,h,r[s+5],5,-701558691),h=e(h,t,i,a,r[s+10],9,38016083),a=e(a,h,t,i,r[s+15],14,-660478335),i=e(i,a,h,t,r[s+4],20,-405537848),t=e(t,i,a,h,r[s+9],5,568446438),h=e(h,t,i,a,r[s+14],9,-1019803690),a=e(a,h,t,i,r[s+3],14,-187363961),i=e(i,a,h,t,r[s+8],20,1163531501),t=e(t,i,a,h,r[s+13],5,-1444681467),h=e(h,t,i,a,r[s+2],9,-51403784),a=e(a,h,t,i,r[s+7],14,1735328473),t=c(t,i=e(i,a,h,t,r[s+12],20,-1926607734),a,h,r[s+5],4,-378558),h=c(h,t,i,a,r[s+8],11,-2022574463),a=c(a,h,t,i,r[s+11],16,1839030562),i=c(i,a,h,t,r[s+14],23,-35309556),t=c(t,i,a,h,r[s+1],4,-1530992060),h=c(h,t,i,a,r[s+4],11,1272893353),a=c(a,h,t,i,r[s+7],16,-155497632),i=c(i,a,h,t,r[s+10],23,-1094730640),t=c(t,i,a,h,r[s+13],4,681279174),h=c(h,t,i,a,r[s+0],11,-358537222),a=c(a,h,t,i,r[s+3],16,-722521979),i=c(i,a,h,t,r[s+6],23,76029189),t=c(t,i,a,h,r[s+9],4,-640364487),h=c(h,t,i,a,r[s+12],11,-421815835),a=c(a,h,t,i,r[s+15],16,530742520),t=o(t,i=c(i,a,h,t,r[s+2],23,-995338651),a,h,r[s+0],6,-198630844),h=o(h,t,i,a,r[s+7],10,1126891415),a=o(a,h,t,i,r[s+14],15,-1416354905),i=o(i,a,h,t,r[s+5],21,-57434055),t=o(t,i,a,h,r[s+12],6,1700485571),h=o(h,t,i,a,r[s+3],10,-1894986606),a=o(a,h,t,i,r[s+10],15,-1051523),i=o(i,a,h,t,r[s+1],21,-2054922799),t=o(t,i,a,h,r[s+8],6,1873313359),h=o(h,t,i,a,r[s+15],10,-30611744),a=o(a,h,t,i,r[s+6],15,-1560198380),i=o(i,a,h,t,r[s+13],21,1309151649),t=o(t,i,a,h,r[s+4],6,-145523070),h=o(h,t,i,a,r[s+11],10,-1120210379),a=o(a,h,t,i,r[s+2],15,718787259),i=o(i,a,h,t,r[s+9],21,-343485551),t=f(t,v),i=f(i,d),a=f(a,g),h=f(h,l)}return Array(t,i,a,h)}(function(r){for(var n=Array(),t=255,u=0;u<8*r.length;u+=8)n[u>>5]|=(r.charCodeAt(u/8)&t)<<u%32;return n}(r),8*r.length))})),n._RF.push({},"d1087sASd5D2JjuR1B0yBHL","md5",void 0);function t(r,n,t,u,e,c){return f((o=f(f(n,r),f(u,c)))<<(i=e)|o>>>32-i,t);var o,i}function u(r,n,u,e,c,o,f){return t(n&u|~n&e,r,n,c,o,f)}function e(r,n,u,e,c,o,f){return t(n&e|u&~e,r,n,c,o,f)}function c(r,n,u,e,c,o,f){return t(n^u^e,r,n,c,o,f)}function o(r,n,u,e,c,o,f){return t(u^(n|~e),r,n,c,o,f)}function f(r,n){var t=(65535&r)+(65535&n);return(r>>16)+(n>>16)+(t>>16)<<16|65535&t}n._RF.pop()}}}));

System.register("chunks:///_virtual/MessageBoxView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewBaseComponent.ts","./ScheduleManager.ts"],(function(t){"use strict";var e,i,l,n,r,o,a,s,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,l=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,a=t.Label,s=t.Node,c=t.Button},function(t){u=t.ViewBaseComponent},function(t){h=t.scheduleManager}],execute:function(){var b,f,g,p,w,C,B,v,y,d,m,k,V,L,z,S,T;r._RF.push({},"db2f72J8EJI+JwIxEPrsWHa","MessageBoxView",void 0);var M=o.ccclass,x=o.property;t("MessageBoxView",(b=M("MessageBoxView"),f=x(a),g=x(s),p=x(a),w=x(s),C=x(a),B=x(a),v=x(c),b((m=e((d=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,l(e,"content",m,n(e)),l(e,"leftButton",k,n(e)),l(e,"leftLabel",V,n(e)),l(e,"rightButton",L,n(e)),l(e,"rightLabel",z,n(e)),l(e,"lbTitle",S,n(e)),l(e,"btnClose",T,n(e)),e.leftCallback=void 0,e.rightCallback=void 0,e}i(e,t);var r=e.prototype;return r.onInit=function(t){var e,i,l,n=this;this.content.string=t.content,this.leftCallback=t.leftCallback,this.rightCallback=t.rightCallback,this.lbTitle.string=null!=(e=t.titleStr)?e:"",this.lbTitle.node.active=!!t.titleStr,this.btnClose.node.active=!!t.closeBtn,this.rightLabel.string=null!=(i=t.rightStr)?i:"",this.rightButton.active=!!t.rightStr,this.leftLabel.string=null!=(l=t.leftStr)?l:"",this.leftButton.active=!!t.leftStr,this.leftButton.parent.active=this.leftButton.active||this.rightButton.active,"number"==typeof t.autoCloseTime&&t.autoCloseTime>0&&h.scheduleOnce((function(){return n.closeView()}),t.autoCloseTime)},r.onDestroy=function(){},r.onClickLeft=function(){this.leftCallback?(this.leftCallback(this),this.closeView()):this.closeView()},r.onClickRight=function(){this.rightCallback?(this.rightCallback(this),this.closeView()):this.closeView()},e}(u)).prototype,"content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(d.prototype,"leftButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(d.prototype,"leftLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(d.prototype,"rightButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(d.prototype,"rightLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(d.prototype,"lbTitle",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(d.prototype,"btnClose",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/ModelBase.ts",["cc","./live-custom.ts","./Logger.ts"],(function(t){"use strict";var n,e;return{setters:[function(t){n=t.cclegacy},null,function(t){e=t.logger}],execute:function(){n._RF.push({},"39f1eRLDp9NQ6gFfpQhYN5U","ModelBase",void 0);t("default",function(){function t(){}var n=t.prototype;return n.init=function(){var t=this.constructor.toString().match(/\w+/g)[1];e.warn("ModelBase",t+" maybe not init!")},n.deInit=function(){var t=this.constructor.toString().match(/\w+/g)[1];e.warn("ModelBase",t+" maybe not deInit! ")},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventData2.ts","./EventCenter.ts","./Logger.ts","./Tools.ts","./HttpRequest.ts","./WebsocketRequest.ts"],(function(e){"use strict";var t,r,n,s,o,i,a,c,u,h;return{setters:[function(e){t=e.createClass,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){s=e.cclegacy},function(e){o=e.EventID},function(e){i=e.eventCenter},function(e){a=e.Logger},function(e){c=e.tools},function(e){u=e.default},function(e){h=e.default}],execute:function(){s._RF.push({},"2cc5dOM8zBBE5y4CUrxJX2d","NetworkManager",void 0);var f=new a("NetworkManager");e("networkManager",new(function(){function e(){this._websocketRequest=new h,this._httpRequest=new u,this._receiveMap=new Map,this._headerToken=void 0,this._headers={},this._messageCallback=void 0,this._openCallback=void 0,this._closeCallback=void 0,this._errorCallback=void 0,this._wsUrl=void 0,this._retryCount=0,this._roomID=""}var s=e.prototype;return s.init=function(e){this._opts=e},s.reset=function(e){e.apiDomain&&this._opts.apiDomain!==e.apiDomain&&(this._opts.apiDomain=e.apiDomain)},s.websocketConnect=function(){var e=r(n().mark((function e(t,r,s,a,c){var u=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._messageCallback=function(e){r&&r(),u._websocketReceive(e)},this._openCallback=function(){s&&s(),i.fire(o.NETWORK_CONNECTED)},this._closeCallback=function(e){a&&a(),u._websocketClosed(e),i.fire(o.NETWORK_CLOSED)},this._errorCallback=function(){c&&c(),i.fire(o.NETWORK_ERROR)},this._wsUrl=t,e.next=7,this.connect();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n,s,o){return e.apply(this,arguments)}}(),s.connect=function(){return this._websocketRequest.connect(this._wsUrl,"arraybuffer",this._messageCallback,this._openCallback,this._closeCallback,this._errorCallback)},s.websocketClose=function(){this._websocketRequest&&this._websocketRequest.close()},s.websocketSendOperate=function(e,t){this.websocketSend(proto.common.NetMessage.encode({ID:e,message:t,error:0,roomID:this.roomID}).finish())},s.websocketSend=function(e){this._websocketRequest&&this._websocketRequest.send(e)},s._websocketReceive=function(e){var t=proto.common.NetMessage.decode(new Uint8Array(e));if(t.error==proto.common.ErrorCode.Ok){if(this._receiveMap){var r=this._receiveMap.get(t.ID);if(r){var n=r.parser.decode(t.message);r.callbackArray.forEach((function(e){return e(n)}))}}}else f.error("网络消息错误",t.error)},s._websocketClosed=function(){var e=r(n().mark((function e(t){var s=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.log("websocketClosed code:",t),1e3!==t){e.next=3;break}return e.abrupt("return");case 3:this._retryCount++,this._retryCount<=this._opts.maxRetry?setTimeout(r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.connect();case 2:e.sent&&(s._retryCount=0);case 4:case"end":return e.stop()}}),e)}))),1e3):i.fire(o.NETWORK_ERROR);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.onReceive=function(e,t,r){var n=this._receiveMap.get(e);n||(n={parser:t,callbackArray:[]},this._receiveMap.set(e,n));for(var s=n.callbackArray,o=0;o<s.length;o++)if(s[o]===r)return;n.callbackArray.push(r)},s.offReceive=function(e,t){if(this._receiveMap){var r=this._receiveMap.get(e);if(r)if(t){for(var n=r.callbackArray,s=0;s<n.length;s++)if(n[s]===t)return n.splice(s,1),void(0==t.length&&this._receiveMap.delete(e))}else this._receiveMap.delete(e)}},s.httpSend=function(){var e=r(n().mark((function e(t,r,s,o,i){var a=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){a._httpRequest.request(t,r,s,o,!1,i).then((function(t){return e(t)})).catch((function(t){console.error(t),e(null)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,s,o){return e.apply(this,arguments)}}(),s.setHeaderToken=function(e){this._headerToken=e,this._headers={Authorization:e}},s.setSign=function(e){var t=c.signature(e,this._opts.gameKey);this._headers={Authorization:t}},s.post=function(){var e=r(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.httpSend(this._opts.apiDomain+t,r,0,!0,this._headers);case 2:return s=e.sent,e.abrupt("return",JSON.parse(null!=s?s:'""'));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.get=function(){var e=r(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.httpSend(this._opts.apiDomain+t,r,0,!1,this._headers);case 2:return s=e.sent,e.abrupt("return",JSON.parse(null!=s?s:'""'));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),t(e,[{key:"Token",get:function(){return this._headerToken}},{key:"roomID",get:function(){return this._roomID},set:function(e){this._roomID=e}}]),e}()));s._RF.pop()}}}));

System.register("chunks:///_virtual/NodePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./ResourceLoader.ts"],(function(e){"use strict";var t,o,n,i,r,s;return{setters:[function(e){t=e.createClass},function(e){o=e.cclegacy,n=e.v3,i=e.instantiate},function(e){r=e.logger},function(e){s=e.resourceLoader}],execute:function(){o._RF.push({},"1b20awMaT5Fw6jYC8tvr0m0","NodePool",void 0),e("NodePool",function(){function e(e){this._freePool=[],this._usedPool=[],this._prefab=null,this.info=e}var o=e.prototype;return o.get=function(t){if(!this._prefab)return r.error(e.TAG,"没有加载预制体: "+this.path),null;var o=null;return 0===this._freePool.length?o=this._loadItemNode():(o=this._freePool.pop()).isValid||(r.error(e.TAG,"找到一个无效对象: "+this.path),o=null),o?(this._addToUsed(o),o.active=!0,t?o.getComponent(t):o):null},o.put=function(t){var o=this;if(t&&t.isValid){t.active=!1;var n=this._usedPool.some((function(e,n){return e===t&&(o._usedPool.splice(n,1),o._releaseItem(t),o._addToFree(t)||t.destroy(),!0)}));n||(n=this._freePool.some((function(o){return o===t&&(r.warn(e.TAG,"节点请不要释放多次，已经释放过的，请不要再次释放！name = "+o.name),!0)})))||(r.debug(e.TAG,"销毁对象 name = "+t.name+", uuid = "+t.uuid+", 当前池数量： "+this.nowCount),this._releaseItem(t),t.destroy())}},o.release=function(){var t=this;this._usedPool.length>0&&(r.error(e.TAG,"there still "+this._usedPool.length+" node in use. Are u sure released all Item = "+this.path),[].concat(this._usedPool).forEach((function(e){t.put(e)})),this._usedPool.length=0);this._freePool.forEach((function(e){t._releaseItem(e),e.destroy()})),this._freePool.length=0,this._prefab&&(s.release(this.path),this._prefab=null)},o._releaseItem=function(e){if(this.info.poolComp){var t=e.getComponent(this.info.poolComp);t&&t.deInit()}e.position=n(),e.removeFromParent()},o._loadItemNode=function(){return i(this._prefab)},o._addToUsed=function(e){return this.nowCount<this.maxCount&&(this._usedPool.push(e),!0)},o._addToFree=function(t){return this.nowCount<this.maxCount&&(this._freePool.indexOf(t)>=0?r.error(e.TAG,"You can't put same item twice. itemType = "+t.name):this._freePool.push(t),!0)},o.preloadPrefab=function(e){var t=this;this._prefab?e():s.load(this.path).then((function(o){t._prefab=o,e()})).catch((function(t){e(t)}))},o.preloadOneFrameItem=function(){for(var e=!1,t=0;t<this.createPreFrame;t++)if(this.nowCount<this.initCount){var o=this._loadItemNode();this._addToFree(o),e=!0}return e},t(e,[{key:"path",get:function(){return this.info.path}},{key:"initCount",get:function(){return this.info.initCount||this.info.maxCount}},{key:"maxCount",get:function(){return this.info.maxCount}},{key:"createPreFrame",get:function(){return this.info.createPreFrame||1}},{key:"nowCount",get:function(){return this._freePool.length+this._usedPool.length}}]),e}()).TAG="NodePool",o._RF.pop()}}}));

System.register("chunks:///_virtual/NodePool2.ts",["cc"],(function(){"use strict";var e;return{setters:[function(o){e=o.cclegacy}],execute:function(){e._RF.push({},"2841fQhxk1OD46oDTkoNnYu","NodePool",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/OperationBase.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"b52f0hXRAhHD5GyIkJ2JVh7","OperationBase",void 0);t("OperationBase",function(){function t(){}var n=t.prototype;return n.init=function(){},n.checkMsgValid=function(){return!0},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/PackageTools.ts",["cc"],(function(t){"use strict";var o,n;return{setters:[function(t){o=t.cclegacy,n=t.sys}],execute:function(){o._RF.push({},"2ab11VcQjVIqLdlAkaNTRTJ","PackageTools",void 0);t("packageTools",new(function(){function t(){}var o=t.prototype;return o.isIos=function(){return n.platform==n.Platform.IOS},o.isAndorid=function(){return n.platform==n.Platform.ANDROID},t}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/Preloaders.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"4d931WPhzlHx6dxzG5fcTpP","Preloaders",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Preloaders2.ts",["cc","./Logger.ts","./ResourceLoader.ts","./ResourcePreloader.ts","./UIConfig2.ts"],(function(e){"use strict";var r,n,o,a,t;return{setters:[function(e){r=e.cclegacy},function(e){n=e.Logger},function(e){o=e.resourceLoader},function(e){a=e.ResourcePreloader},function(e){t=e.uiConfig}],execute:function(){e("preloadNodePool",(function(e,r){for(var n=a.addLoader({name:e+"PrefabLoader",loadeHandler:function(e,n){d.info("preloadNodePool. loadPrefab name = "+e),r.preloadPrefab(n)},releaseHandler:function(e){},arrResource:[""+e]}),o=[],t=r.nowCount,c=r.createPreFrame,u=t;u<r.initCount;u+=c){var i=Math.min(u+c,r.initCount);o.push(e+"Node"+u+"-"+i)}var l=a.addLoader({name:e+"NodeLoader",loadeHandler:function(e){d.info("loadItem name = "+e),r.preloadOneFrameItem()},releaseHandler:function(e){},arrResource:o});return n.stepWork.concact(l.stepWork)})),r._RF.push({},"8c850R2bP1NdpK4Id4l1k/u","Preloaders",void 0);var d=new n("Preloader");e("preloadUIPrefab",(function(){return a.addLoader({name:"UIPreloader",loadeHandler:function(e,r){var n=t.getConfig(e);n&&o.load(n.path).then((function(){r()})).catch((function(e){r(e)}))},releaseHandler:function(e){},arrResource:t.getAllUI().filter((function(e){return e.preload})).map((function(e){return e.id}))})})),e("preloadSpines",(function(e){return a.addLoader({name:"SpinePreloader",loadeHandler:function(e,r){o.load(e).then((function(e){r()})).catch((function(e){r(e)}))},releaseHandler:function(e){o.release(e)},arrResource:[].concat(e)})}));r._RF.pop()}}}));

System.register("chunks:///_virtual/RefCount.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"ee226TJlzdHQq8SyPnqi8uC","RefCount",void 0);t("default",function(){function t(t){this._res=null,this._count=0,this._res=t,this._count=1}var n=t.prototype;return n.retain=function(){return++this._count},n.release=function(){return--this._count},e(t,[{key:"asset",get:function(){return this._res}},{key:"ref",get:function(){return this._count}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(e){"use strict";var n,r,t,u,o,i;return{setters:[function(e){n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){t=e.cclegacy,u=e.assetManager,o=e.AssetManager},function(e){i=e.Logger}],execute:function(){t._RF.push({},"d7306l5BgBC5Zq67MXncQKg","ResourceLoader",void 0);var c=new i("ResourceLoader");e("resourceLoader",new(function(){function e(){this._cache=new Map}var t=e.prototype;return t.load=function(){var e=n(r().mark((function e(n,t){var u,o,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=/^http/.test(n),o=u?this._loadFromRemote(n):this._loadWithBundle(n,t),e.abrupt("return",o.then((function(e){return e&&e.addRef(),c.debug(n+" 当前资源的引用计数: "+e.refCount),i._cache.set(n,e),e})));case 3:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),t.preload=function(){var e=n(r().mark((function e(n,t,i){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null!=t?t:o.BuiltinBundleName.RESOURCES,c.debug("从 "+a+" 预加载资源："+n),e.abrupt("return",new Promise((function(e,r){u.loadBundle(a,(function(r,t){if(r)return c.error("加载资源包"+a+"错误",r),void e(!1);t.preload(n,(function(e,n){i&&i(e/n)}),(function(r){if(r)return c.error("加载资源"+n+"错误",r),void e(!1);e(!0)}))}))})));case 3:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}(),t.loadBundles=function(e,n,r,t){var o=e.length,i=0,a=0,s=e.map((function(e){return new Promise((function(r,s){u.loadBundle(e,(function(u,s){u?(c.error("加载资源包"+e+"错误",u),a++):c.debug("加载完资源包"+e),n.call(t,++i/o),r(s)}))}))}));Promise.all(s).then((function(){return r.call(t,a)}))},t._loadFromRemote=function(e){return c.debug("加载远程资源："+e),new Promise((function(n,r){var t;t=e.indexOf(".png")>-1||e.indexOf(".jpg")>-1||e.indexOf(".jpeg")>-1?null:{ext:".png"},u.loadRemote(e,t,(function(r,t){if(r)return c.error("加载资源"+e+"错误",r);n(t)}))}))},t._loadWithBundle=function(e,n){var r=null!=n?n:o.BuiltinBundleName.RESOURCES;return c.debug("从 "+r+" 加载资源："+e),new Promise((function(n,t){u.loadBundle(r,(function(t,u){if(t)return c.error("加载资源包"+r+"错误",t);u.load(e,(function(r,t){if(r)return c.error("加载资源"+e+"错误",r);n(t)}))}))}))},t.release=function(e){var n=this._cache.get(e);n&&(n.decRef(),c.debug("释放资源: "+e+", 当前计数: "+n.refCount),0===n.refCount&&(u.releaseAsset(n),this._cache.delete(e)))},t.checkCacheValid=function(e){return this._cache.has(e)},e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/ResourcePreloader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StepWork.ts"],(function(e){"use strict";var r,n,t;return{setters:[function(e){r=e.createClass},function(e){n=e.cclegacy},function(e){t=e.StepWork}],execute:function(){n._RF.push({},"dab803l5qREYLejTXZLjn50","ResourcePreloader",void 0);var o=e("PreloaderValue",function(){function e(e){this._info=null,this._arrRes=[],this._stepWork=null,this._info=e,this._stepWork=new t}var n=e.prototype;return n.release=function(){var e=this;this._arrRes.forEach((function(r){e._info.releaseHandler(r)})),this._arrRes.length=0},n.addRes=function(e){this._arrRes.push(e)},n.toString=function(){return this._arrRes.join("++")},r(e,[{key:"name",get:function(){return this._info.name}},{key:"stepWork",get:function(){return this._stepWork}}]),e}());e("ResourcePreloader",function(){function e(){}return e.addLoader=function(e){var r=new o(e),n=r.stepWork,t=e.loadeHandler.length>1;return e.arrResource.forEach((function(o){t?n.addTask((function(n){e.loadeHandler(o,(function(e){e||r.addRes(o),n(e)}))}),"Preloader_"+o):n.addTask((function(){e.loadeHandler(o),r.addRes(o)}),"Preloader_"+o)})),r},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ScheduleManager.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"2193bEBkQ5BEYY/wob4YDcz","ScheduleManager",void 0);e("scheduleManager",new(function(){function e(){this._seq=0,this._handlers=new Map,this._ccInst=null}var n=e.prototype;return n.init=function(e){this._ccInst=e},n.scheduleOnce=function(e,n){var t=this,s=this._newId(),c=function(){t._handlers.has(s)&&e(),t._removeHandler(s)};return this._handlers.set(s,c),this._ccInst.scheduleOnce(c,n),s},n.schedule=function(e,n,t,s){var c=this._newId(),r=function(n){e(n)};return this._handlers.set(c,r),this._ccInst.schedule(r,n,t,s),c},n.unschedule=function(e){this._handlers.has(e)&&(this._ccInst.unschedule(this._handlers.get(e)),this._removeHandler(e))},n.nextFrame=function(e,n){for(var t=arguments.length,s=new Array(t>2?t-2:0),c=2;c<t;c++)s[c-2]=arguments[c];this.scheduleOnce((function(){return e.call.apply(e,[n].concat(s))}),0)},n._removeHandler=function(e){this._handlers.delete(e)},n._newId=function(){return++this._seq},e}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/SdkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BilibiliSDK.ts","./Browser.ts","./DouyinSDK.ts","./KuaishouSDK.ts","./ThinkingSDK.ts"],(function(i){"use strict";var n,t,u,e,s,o,h;return{setters:[function(i){n=i.createClass},function(i){t=i.cclegacy},function(i){u=i.BilibiliSDK},function(i){e=i.Browser},function(i){s=i.DouyinSDK},function(i){o=i.KuaishouSDK},function(i){h=i.ThinkingSDK}],execute:function(){t._RF.push({},"c57eapPbJ1E4LA/eaDjxNoI","SdkManager",void 0);i("sdkManager",new(function(){function i(){this._thinking=void 0}var t=i.prototype;return t.init=function(i,n){this._initThinkSdk(i.thinking,n),this._initDouyinSdk(i.douyin,n),this._initBilibili(i.bilibili,n),this._initKuaishou(i.kuaishou,n),this._danmu?"test"===i.mode&&e.registerCmd():this._danmu=(new e).init(n)},t._initThinkSdk=function(i,n){i&&(this._thinking=new h(i).init(n))},t._initDouyinSdk=function(i,n){i&&(this._danmu=new s(i).init(n))},t._initBilibili=function(i,n){i&&(this._danmu=new u(i).init(n))},t._initKuaishou=function(i,n){i&&(this._danmu=new o(i).init(n))},n(i,[{key:"danmu",get:function(){return this._danmu}},{key:"thinking",get:function(){return this._thinking}}]),i}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/SkeletonManager.ts",["cc","./Logger.ts","./ResourceLoader.ts"],(function(n){"use strict";var e,t,o,r,a,i;return{setters:[function(n){e=n.cclegacy,t=n.Node,o=n.sp,r=n.isValid},function(n){a=n.logger},function(n){i=n.resourceLoader}],execute:function(){e._RF.push({},"9ce3drcrbdOg5wiHwOcDqW9","SkeletonManager",void 0);n("default",new(function(){function n(){}var e=n.prototype;return e.loadSkeletonData=function(n){return new Promise((function(e,t){i.load(n).then((function(n){e(n)})).catch((function(n){t(n)}))}))},e.loadSkeleton=function(n){var e=this;return new Promise((function(r,a){e.loadSkeletonData(n).then((function(n){var e=(new t).addComponent(o.Skeleton);e.skeletonData=n,e.premultipliedAlpha=!1,r(e)})).catch((function(n){a(n)}))}))},e.releaseSkeletonData=function(n){i.release(n)},e.releaseSkeleton=function(n,e){e&&r(e.node)&&(e.node.removeFromParent(),e.node.destroy(),i.release(n))},e.findAnimation=function(n,e){var t=n.getRuntimeData(!0);if(!t)return a.error("SkeletonManager","Can not find SkeletonCache in skeleton."),null;for(var o=t.animations,r=0;r<o.length;++r)if(o[r].name==e)return o[r];return null},e.parseAnimations=function(n){var e=[],t=n.skeletonJson.animations;for(var o in t){var r=this.findAnimation(n,o);r&&e.push(r)}return e},e.parseSkin=function(n){var e=[],t=n.skeletonJson.skins;for(var o in t)t.hasOwnProperty(o)&&e.push(o);return e},n}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteLoader.ts",["cc","./Logger.ts","./ResourceLoader.ts"],(function(e){"use strict";var t,r,a,i,n;return{setters:[function(e){t=e.cclegacy,r=e.ImageAsset,a=e.SpriteFrame},function(e){i=e.logger},function(e){n=e.resourceLoader}],execute:function(){t._RF.push({},"f08048RuOJAAIX0q7taSEE8","SpriteLoader",void 0),e("SpriteLoader",function(){function e(){this._loaded=new Map,this._cache=new Map}var t=e.prototype;return t.release=function(){i.debug(e.TAG,"释放已加载sprite资源: "+this._loaded.size),this._loaded.forEach((function(e){return e.spTarget.spriteFrame=null})),this._loaded.clear(),this._cache.forEach((function(e,t){n.release(t)})),this._cache.clear()},t.changeSpriteP=function(t,r,a){var n=this;return new Promise((function(c,s){n.changeSprite(t,r,(function(t){t?(i.error(e.TAG,"更换精灵帧错误"+r,t),c(!1)):c(!0)}),a)}))},t.changeSprite=function(t,c,s,o){var h=this;if(t){var u=/^http/.test(c);if(-1!=c.indexOf("/spriteFrame")||u||(c+="/spriteFrame"),this._loaded.has(t))if(this._loaded.get(t).url===c)return void(s&&s());if(this._cache.has(c)){var d=this._cache.get(c);return t.spriteFrame=d,this._loaded.set(t,{url:c,spTarget:t}),void(s&&s())}i.debug(e.TAG,"精灵 "+t.name+" 加载 "+c),n.load(c,o).then((function(e){if(t&&e){h._cache.has(c)&&(h._cache.delete(c),n.release(c));var i=null;e instanceof r?(i=a.createWithImage(e)).packable=!1:i=e,i instanceof a&&(t.spriteFrame=i),h._cache.set(c,i),h._loaded.set(t,{url:c,spTarget:t}),s&&s()}else s&&s("Can not change sprite for NULL!!!")})).catch((function(e){return s&&s(e)}))}else s&&s("Can not change sprite for NULL!!!")},e}()).TAG="SpriteLoader",t._RF.pop()}}}));

System.register("chunks:///_virtual/StepWork.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./ScheduleManager.ts"],(function(t){"use strict";var s,e,i,r,n;return{setters:[function(t){s=t.createClass,e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){r=t.logger},function(t){n=t.scheduleManager}],execute:function(){var u;i._RF.push({},"64e72Fq7yZE36uOwaH2f7Vd","StepWork",void 0),function(t){t[t.NONE=0]="NONE",t[t.DOING=1]="DOING",t[t.FINISH=2]="FINISH"}(u||(u={}));var h;!function(t){t[t.SYNC=0]="SYNC",t[t.ASYNC=1]="ASYNC"}(h||(h={}));var o,a=function(){function t(t,s){this._state=u.NONE,this._name="",this._jobHandler=null,this._type=h.SYNC,this._jobHandler=s,this._name=t}return t.prototype.exec=function(){r.warn("StepWork","need overwrite exec from BaseTask")},s(t,[{key:"state",get:function(){return this._state},set:function(t){this._state=t}},{key:"name",get:function(){return this._name}},{key:"finished",get:function(){return this._state===u.FINISH}},{key:"type",get:function(){return this._type}}]),t}(),c=function(t){function s(s,e){var i;return(i=t.call(this,s,e)||this)._type=h.SYNC,i}return e(s,t),s.prototype.exec=function(){this.state===u.NONE&&(this.state=u.DOING,this._jobHandler&&this._jobHandler(),this.state=u.FINISH)},s}(a),_=function(t){function s(s,e){var i;return(i=t.call(this,s,e)||this)._type=h.ASYNC,i}return e(s,t),s.prototype.exec=function(){var t=this;this.state===u.NONE&&(this.state=u.DOING,this._jobHandler&&this._jobHandler((function(s){t.state=u.FINISH,s&&r.error("StepWork","AsyncTask name = "+t.name+" execute failed. err = "+s)})))},s}(a);!function(t){t[t.NONE=0]="NONE",t[t.DOING=1]="DOING",t[t.DOING_SUB=2]="DOING_SUB",t[t.FINISH=3]="FINISH"}(o||(o={}));t("StepWork",function(){function t(t){void 0===t&&(t=10),this._state=o.NONE,this._handler=null,this._scheduleId=0,this._timeoutId=0,this._timeout=0,this._currIndex=0,this._currPriorityIndex=0,this._subWork=null,this._tasksWithPriority=[],this._timeout=t}var e=t.prototype;return e.isAsyncHandler=function(t){return t.length>0},e.addTask=function(t,s,e){return void 0===s&&(s="defaultJob"),void 0===e&&(e=0),this.isAsyncHandler(t)?this._addTask(new _(s,t),e):this._addTask(new c(s,t),e)},e.start=function(t){var s=this;void 0===t&&(t=null),this._state===o.NONE&&(this._state=o.DOING,this._handler=t,0==this._scheduleId&&(this._scheduleId=n.schedule((function(){s._update()}),0),this._timeoutId=n.scheduleOnce((function(){r.warn("StepWork","work has already Timeout. need check work!!!!")}),this._timeout)))},e.stop=function(){this._currIndex=0,this._currPriorityIndex=0,this._tasksWithPriority=[],this._scheduleId&&n.unschedule(this._scheduleId),this._timeoutId&&n.unschedule(this._timeoutId),this._scheduleId=0,this._timeoutId=0,this._state=o.NONE,this._handler=null,this._subWork&&this._subWork.stop(),this._subWork=null},e._finish=function(){this._handler&&this._handler(),this._handler=null,this.stop()},e._appendOneAsyncTask=function(){var t=this._currProcessTasks;return!!(t&&t.tasks.length>0)&&t.tasks.some((function(t){return t.type===h.ASYNC&&t.state===u.NONE&&(t.exec(),!0)}))},e._execSyncTask=function(){var t=this._currProcessTasks;if(t&&t.tasks.length>0)for(;this._currIndex<t.tasks.length;){var s=t.tasks[this._currIndex];if(s.type===h.SYNC&&s.state===u.NONE)return s.exec(),!0;++this._currIndex}return!1},e._allTaskFinished=function(){var t=this._currProcessTasks;return!t||0==this._leftAsyncTaskCount&&this._currIndex>=t.tasks.length},e._checkToGoNextPriority=function(){var t=this._currProcessTasks;t&&(t.tasks.some((function(t){return t.state!=u.FINISH}))||(this._currPriorityIndex++,this._currIndex=0))},e._update=function(){var t=this;if(this._state!==o.NONE&&this._state!==o.FINISH){var s=!0;this._currAsyncProcessTaskCount<5&&(s=this._appendOneAsyncTask());var e=this._execSyncTask();s||e||this._checkToGoNextPriority(),this._allTaskFinished()&&(this._subWork?(n.unschedule(this._scheduleId),this._scheduleId=0,this._state=o.DOING_SUB,this._subWork.start((function(){t._finish()}))):this._finish())}},e._getTasksWithPriority=function(t,s){void 0===s&&(s=!1);var e=null,i=this._tasksWithPriority.length;return this._tasksWithPriority.some((function(s,r){return s.priority===t?(e=s,!0):s.priority<t&&(i=r,!0)})),!e&&s&&(e={priority:t,tasks:[]},this._tasksWithPriority.splice(i,0,e)),e},e._addTask=function(t,s){return this._getTasksWithPriority(s,!0).tasks.push(t),this},e.concact=function(t){return this._state!==o.NONE?(r.error("StepWork","Can not add work for status = "+this._state),this):(this.addSubWork(t),this)},e.addSubWork=function(t){this._timeout=this._timeout+t.timeout,this._subWork?this._subWork.addSubWork(t):this._subWork=t},s(t,[{key:"length",get:function(){return this._tasksWithPriority.length+(this._subWork?this._subWork.length:0)}},{key:"timeout",get:function(){return this._timeout}},{key:"_currProcessTasks",get:function(){return this._currPriorityIndex<this._tasksWithPriority.length?this._tasksWithPriority[this._currPriorityIndex]:null}},{key:"_currAsyncProcessTaskCount",get:function(){var t=0,s=this._currProcessTasks;return s&&s.tasks.length>0&&s.tasks.forEach((function(s){s.type===h.ASYNC&&s.state===u.DOING&&++t})),t}},{key:"_leftAsyncTaskCount",get:function(){var t=0,s=this._currProcessTasks;return s&&s.tasks.length>0&&s.tasks.forEach((function(s){s.type===h.ASYNC&&s.state!==u.FINISH&&++t})),t}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ThinkingSDK.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./danmu.ts"],(function(t){"use strict";var e,i,n,o;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy},function(t){n=t.Logger},function(t){o=t.DMTongji}],execute:function(){t("ThinkingMode",void 0),i._RF.push({},"cffdeiZzsdM5pGWWeO9mDvO","ThinkingSDK",void 0);var a,r=new n("ThinkingSDK");!function(t){t.None="none",t.Debug="debug",t.DebugOnly="debugOnly"}(a||(a=t("ThinkingMode",{})));var u="GameStart",s="GameStop",l="RoundStart",c="RoundEnd",h="five_minute",d="Join";t("ThinkingSDK",function(){var t=i.prototype;function i(t){this.ta=void 0,this.inited=!1,this._roundStartTime=0,this.cfg=t}return t.callMethod=function(t){var e;if(this.inited){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return(e=this.ta)[t].apply(e,n)}},t.init=function(t,e){var i,n;return this.inited||!this.cfg?null:(this.inited=!0,this.ta=new ThinkingAnalyticsAPI({appId:this.cfg.thinkingID,serverUrl:null!=(i=this.cfg.thinkingUrl)?i:"https://data.q1.com",debugMode:null!=(n=this.cfg.mode)?n:a.None}),this.cfg.guestID&&this.ta.identify(this.cfg.guestID),this.ta.init(),t&&this.setPublicProperties(t),e&&this.userSetOnce(e),this)},t.login=function(t){this.callMethod("login",t)},t.logout=function(){this.callMethod("logout")},t.track=function(t,e,i){this.callMethod("track",t,null!=e?e:{},null!=i?i:new Date,(function(e){0!==e.code?r.error("上报事件"+t+"错误:"+e.msg):r.debug("上报事件"+t+"成功")}))},t.gameStart=function(t){this._roundStartTime=Date.now(),this.login(t),this.userSetOnce({userID:t}),this.track(u)},t.gameStop=function(){this.track(s)},t.roundStart=function(){this._roundStartTime=Date.now(),o.clearAll(),this.track(l)},t.roundEnd=function(){this.track(c,{DMValid:o.getValidCount(),DMTotal:o.getTotalCount(),DMValidPerson:o.getValidPopulation(),DMPerson:o.getTotalPopulation(),DMValidAudienceID:o.getValidPlayerID(),DMTotalAudienceID:o.getTotalPlayerID(),Duration:this._roundStartTime?Math.ceil((Date.now()-this._roundStartTime)/1e3):0})},t.heart=function(t){this.track(t||h,{DMValid:o.getValidCount(),DMTotal:o.getTotalCount(),DMValidPerson:o.getValidPopulation(),DMPerson:o.getTotalPopulation(),DMValidAudienceID:o.getValidPlayerID(),DMTotalAudienceID:o.getTotalPlayerID(),Duration:this._roundStartTime?Math.ceil((Date.now()-this._roundStartTime)/1e3):0})},t.join=function(t){this.track(d,{audienceID:t})},t.timeEvent=function(t){this.callMethod("timeEvent",t)},t.setPublicProperties=function(t){this.callMethod("setSuperProperties",t)},t.delPublicProperty=function(t){this.callMethod("unsetSuperProperty",t)},t.clearPublicProperties=function(){this.callMethod("clearSuperProperties")},t.setDynamicProperties=function(t){this.callMethod("setDynamicSuperProperties",t)},t.userSet=function(t){this.callMethod("userSet",t)},t.userSetOnce=function(t){this.callMethod("userSetOnce",t)},t.pause=function(){this.callMethod("setTrackStatus","PAUSE")},t.stop=function(){this.callMethod("setTrackStatus","STOP")},t.resume=function(){this.callMethod("setTrackStatus","NORMAL")},e(i,[{key:"deviceID",get:function(){return this.callMethod("getDeviceId")}}]),i}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Tools.ts",["cc","./md5.ts"],(function(n){"use strict";var r,t;return{setters:[function(n){r=n.cclegacy},function(n){t=n.hex_md5}],execute:function(){r._RF.push({},"08d13pISQxODqTrGLsaRi2M","Tools",void 0);n("tools",new(function(){function n(){}var r=n.prototype;return r.deepCopy=function(n){var r=Array.isArray(n)?[]:{};if(n&&"object"==typeof n)for(var t in n)n.hasOwnProperty(t)&&(n[t]&&"object"==typeof n[t]?r[t]=this.deepCopy(n[t]):r[t]=n[t]);return null==n?null:r},r.signature=function(n,r){var e=Object.keys(n).sort(),o="";return e.forEach((function(r){void 0!==n[r]&&null!==n[r]&&(o+=n[r])})),t(o+r)},r.queryParams=function(){var n=window.location.search.slice(1).split("&"),r={};return n.forEach((function(n){var t=n.indexOf("="),e=n.slice(0,t),o=n.slice(t+1);r[e]=o})),r},r.urlIncluded=function(n){return-1!==window.location.href.indexOf(n)},r.strToUnit8Array=function(n){for(var r=[],t=0;t<n.length;t++)r.push(n.charCodeAt(t));return new Uint8Array(r)},n}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIConfig.ts",["cc","./live-custom.ts","./UIConfig2.ts"],(function(e){"use strict";var i,E,a;return{setters:[function(e){i=e.cclegacy},null,function(i){E=i.uiConfig,a=i.UI_CACHE;var n={};n.UI_CACHE=i.UI_CACHE,n.uiConfig=i.uiConfig,e(n)}],execute:function(){i._RF.push({},"45038VnYRFCE6y8MM/WFUMB","UIConfig",void 0);var n=e("VIEW_UID",{LOGIN_SCENE:"LoginScene",MAIN_SCENE:"MainScene",MESSAGE_VIEW:"MessageBoxView",WAIT_VIEW:"WaitView",GAME_1_VIEW:"Game1View",GAME_2_VIEW:"Game2View"});E.add({id:n.MESSAGE_VIEW,path:"prefab/view/MessageBoxView",component:n.MESSAGE_VIEW}).add({id:n.MAIN_SCENE,path:"prefab/scene/MainScene",component:n.MAIN_SCENE,cacheMode:a.NODE}).add({id:n.WAIT_VIEW,path:"prefab/view/WaitView",component:n.WAIT_VIEW,cacheMode:a.NODE}).add({id:n.GAME_1_VIEW,path:"prefab/view/Game1View",component:n.GAME_1_VIEW,cacheMode:a.NODE,isPage:!0}).add({id:n.GAME_2_VIEW,path:"prefab/view/Game2View",component:n.GAME_2_VIEW,cacheMode:a.NODE,isPage:!0}),i._RF.pop()}}}));

System.register("chunks:///_virtual/UIConfig2.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){var i,o;n({UI_CACHE:void 0,UI_LOADING:void 0}),t._RF.push({},"be717crjXdLiq8ORQuoK+98","UIConfig",void 0),function(n){n[n.NONE=1]="NONE",n[n.PREFAB=2]="PREFAB",n[n.NODE=3]="NODE"}(i||(i=n("UI_CACHE",{}))),function(n){n[n.NONE=0]="NONE",n[n.WAITING=1]="WAITING",n[n.LOADING=2]="LOADING"}(o||(o=n("UI_LOADING",{})));n("uiConfig",new(function(){function n(){this._uiInfo=new Map}var t=n.prototype;return t.getConfig=function(n){return this._uiInfo.has(n)?this._uiInfo.get(n):(this.add({id:n,path:n}),this.getConfig(n))},t.add=function(n){return n&&null==n.cacheMode&&(n.cacheMode=i.NONE),this._uiInfo.set(n.id,n),this},t.getAllUI=function(){var n=[];return this._uiInfo.forEach((function(t){n.push(t)})),n},n}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/UIGridView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./UIHelper.ts"],(function(t){"use strict";var i,e,n,s,o,a,h,r,d,l,c,g,p,u,_,m,f,S,I,w,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.extends,a=t.createClass},function(t){h=t.cclegacy,r=t._decorator,d=t.ScrollView,l=t.CCFloat,c=t.Enum,g=t.Size,p=t.Vec2,u=t.UITransform,_=t.v2,m=t.Widget,f=t.isValid,S=t.v3,I=t.Component},function(t){w=t.logger},function(t){y=t.uiHelper}],execute:function(){var v,z,U,R,T,C,P,L,x,A,b,E,V,k,N,B,D,O,M,F,G,H;h._RF.push({},"aa929Wz3aBM96Fndvyo4k2O","UIGridView",void 0),function(t){t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL"}(H||(H={}));var Z=r.ccclass,W=r.property;t("UIGridView",(v=Z("UIGridView"),z=W(d),U=W({type:l,tooltip:"左边距"}),R=W({type:l,tooltip:"右边距"}),T=W({type:l,tooltip:"上边距"}),C=W({type:l,tooltip:"下边距"}),P=W({type:l,tooltip:"SpaceY 行间距（水平模式下，会自动修正非法数值）"}),L=W({type:l,tooltip:"SpaceX 列间距（垂直模式下，会自动修正非法数值）"}),x=W({type:c(H),tooltip:"水平还是垂直滚动；垂直滚动模式下，宽度不变，高度自动计算；水平模式下，高度不变，宽度自动计算"}),A=W({tooltip:"关闭自适应位置"}),v((V=i((E=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,n(i,"scroll",V,s(i)),n(i,"paddingLeft",k,s(i)),n(i,"paddingRight",N,s(i)),n(i,"paddingTop",B,s(i)),n(i,"paddingBottom",D,s(i)),n(i,"spacingRow",O,s(i)),n(i,"spacingCol",M,s(i)),n(i,"direction",F,s(i)),n(i,"closeAutoAlign",G,s(i)),i._datas=[],i._curShowItems=new Map,i._itemPool=[],i._option={getItem:function(){return null},releaseItem:function(){},onInit:function(){}},i._numPerUnit=0,i._itemSize=new g(0),i._startIndex=0,i._totalDisplayNum=0,i._delayUpdateInfo=null,i._extraUnits=[],i._marginLeft=0,i._marginRight=0,i._marginTop=0,i._marginBottom=0,i._originSpacing=p.ZERO,i}e(i,t);var h=i.prototype;return h.onLoad=function(){this.scroll&&this.scroll.node.on("scrolling",this._onScroll,this),this._datas=[],this._curShowItems.clear(),this._itemPool=[],this._extraUnits=[];var t=this.scroll.content.getComponent(u);this.direction===H.HORIZONTAL?(this.scroll.horizontal=!0,this.scroll.vertical=!1,t.setAnchorPoint(0,.5)):(this.scroll.horizontal=!1,this.scroll.vertical=!0,t.setAnchorPoint(.5,1)),this._originSpacing=_(this.spacingCol,this.spacingRow)},h.onDestroy=function(){(this._curShowItems.size>0||this._itemPool.length>0)&&w.warn("UIGridView","还有资源没有释放，释放之前要记得先调用 clear"),this.scroll&&this.scroll.node&&this.scroll.node.off("scrolling",this._onScroll,this)},h._onScroll=function(){this.updateScroll()},h.getLeftPendding=function(){return this.paddingLeft+this._marginLeft},h.addItems=function(t,i){var e=this;void 0===i&&(i=!0),this._option?(t.forEach((function(t){var n=e._keyToIndex(t.key);n>=0?i&&(e._datas[n].data=t.data,e._datas[n].uiState=t.uiState,e._datas[n].dirty=!0):e._datas.push(t)})),this.updateScroll()):w.warn("UIGridView","should init UIGridView first.")},h.updateDatas=function(t){if(this._option){this._datas=t,this._computeBaseInfo(),this.updateScroll(!0);for(var i=0;i<this._datas.length;++i)this.updateItem(t[i])}else w.warn("UIGridView","should init UIGridView first.")},h.updateItem=function(t,i){void 0===i&&(i=!1);var e=this._infoToItem(t);e&&this._option.onInit(e,t);var n=this._keyToIndex(t.key);if(n>=0)this._datas[n].data=t.data,this._datas[n].uiState=t.uiState;else if(i){if(this._option.sortFunc){for(var s=0,o=0;o<this._datas.length;++o)if(this._option.sortFunc(this._datas[o],t)>=0){s=o;break}this._datas.splice(s,0,t)}else this._datas.push(t);this.updateScroll()}},h.getItems=function(){return this._curShowItems},h.scrollTo=function(t,i){void 0===i&&(i=.2);var e=this._keyToIndex(t.key);if(e>=0)if(this.direction===H.VERTICAL){var n=Math.floor(e/this._numPerUnit),s=this.startPad+n*this._itemSize.height+n*this.spacingRow;this.scroll.scrollToOffset(_(0,s),i,!0)}else{var o=this.startPad+e*this._itemSize.width+(e-1)*this.spacingCol;this.scroll.scrollToOffset(_(o,0),i,!0)}},h.getGridData=function(t){var i=this._keyToIndex(t);if(i>=0&&i<this._datas.length){var e=o({},this._datas[i]),n=this._infoToItem(e);return n&&(e.uiState=n.uiState),e}return null},h.deleteItem=function(t){var i=this._keyToIndex(t);i>=0&&(this._datas.splice(i,1),this.updateScroll())},h._infoToItem=function(t){return this._curShowItems.get(t.key)},h.getDisplaySize=function(){var t=this.scroll.content.getComponent(u);return this._startIndex>0?t.contentSize:this._totalDisplayNum<this._numPerUnit?this.direction===H.VERTICAL?new g(this.paddingLeft+this.paddingRight+this._marginLeft+this._marginRight+this._itemSize.width*this._totalDisplayNum+this.varyingSpace*(this._totalDisplayNum-1),this.paddingTop+this.paddingBottom+this._marginTop+this._marginBottom+this._itemSize.height):new g(this.paddingLeft+this.paddingRight+this._marginLeft+this._marginRight+this._itemSize.width,this.paddingTop+this.paddingBottom+this._marginTop+this._marginBottom+this._itemSize.width*this._totalDisplayNum+this.varyingSpace*(this._totalDisplayNum-1)):t.contentSize},h._keyToIndex=function(t){var i=-1;return this._datas.some((function(e,n){return e.key==t&&(i=n,!0)})),i},h._computeBaseInfo=function(){var t=this._getOneItem();this._itemSize=y.getNodeSizeWithScale(t.node),this._putOneItem(t),0!=this._itemSize.width&&0!=this._itemSize.height||(w.warn("GridView","item size must not be ZERO"),this._itemSize.width=Math.max(this._itemSize.width,1),this._itemSize.height=Math.max(this._itemSize.height,1));var i=this.getContentSize(),e=this.scroll.content.getComponent(u);if(this.direction===H.VERTICAL?i.width<this.paddingLeft+this.paddingRight+this._itemSize.width?(e.width=this.paddingLeft+this.paddingRight+this._itemSize.width,this.spacingCol=0,w.warn("GridView","Item's width is bigger than container width!!!!!!")):this.spacingCol=Math.min(this.spacingCol,i.width-this.paddingLeft-this.paddingRight-this._itemSize.width):i.height<this.paddingTop+this.paddingBottom+this._itemSize.height?(e.height=this.paddingTop+this.paddingBottom+this._itemSize.height,this.spacingRow=0,w.warn("GridView","Item's width is bigger than container Height!!!!!!")):this.spacingRow=Math.min(this.spacingRow,i.height-this.paddingTop-this.paddingBottom-this._itemSize.height),this.direction===H.VERTICAL?this._numPerUnit=Math.floor((i.width-(this.paddingLeft+this.paddingRight))/(this._itemSize.width+this.varyingSpace)):this._numPerUnit=Math.floor((i.height-(this.paddingTop+this.paddingBottom))/(this._itemSize.height+this.varyingSpace)),0==this.varyingSpace)if(this.direction===H.VERTICAL){var n=i.width-(this.paddingLeft+this.paddingRight)-this._itemSize.width*this._numPerUnit;this._numPerUnit>1?this.spacingCol=n/(this._numPerUnit-1):(this.spacingCol=0,this._marginLeft=n/2,this._marginRight=n/2)}else{var s=i.height-(this.paddingTop+this.paddingBottom)-this._itemSize.height*this._numPerUnit;this._numPerUnit>1?this.spacingRow=s/(this._numPerUnit-1):(this.spacingRow=0,this._marginTop=s/2,this._marginBottom=s/2)}else if(this.direction===H.VERTICAL){var o=i.width-(this.paddingLeft+this.paddingRight)-this._itemSize.width*this._numPerUnit-(this._numPerUnit-1)*this.varyingSpace;this._marginLeft=o/2,this._marginRight=o/2}else{var a=i.height-(this.paddingTop+this.paddingBottom)-this._itemSize.height*this._numPerUnit-(this._numPerUnit-1)*this.varyingSpace;this._marginTop=a/2,this._marginBottom=a/2}},h._computeDisplayInfo=function(t){var i=this;void 0===t&&(t=!1);var e=Math.ceil(this._datas.length/this._numPerUnit),n=0,s=this.scroll.content.getComponent(u);this.direction===H.VERTICAL?(n=this.startPad+this.endPad+this._itemSize.height*e+(e-1)*this.uniformSpace,this._extraUnits&&this._extraUnits.length>0&&this._extraUnits.forEach((function(t){var e=t.node.getComponent(u);n+=e.height*t.node.scale.y+i.uniformSpace})),s.height=n):(n=this.startPad+this.endPad+this._itemSize.width*e+(e-1)*this.uniformSpace,this._extraUnits&&this._extraUnits.length>0&&this._extraUnits.forEach((function(t){var e=t.node.getComponent(u);n+=e.width*t.node.scale.x+i.uniformSpace})),s.width=n);var o=0,a=this.getMaskContentSize(),h=this.direction===H.VERTICAL?a.height:a.width;if(h>=n)o=this._datas.length;else{var r=(this.direction==H.VERTICAL?this._itemSize.height:this._itemSize.width)+this.uniformSpace,d=Math.ceil(h/r)+1;o=Math.min(this._datas.length,d*this._numPerUnit)}this._totalDisplayNum=o,t&&!this.closeAutoAlign&&y.alignNode(this.scroll.content,new g(0,0)),this._checkToAutoCenter()},h._checkToAutoCenter=function(){if(this._option.autoCenter){var t=this.getDisplaySize(),i=this.getMaskContentSize();if(this.direction===H.VERTICAL){if(t.height<i.height){var e=this.scroll.content.parent.getComponent(m);e&&(e.enabled=!1);var n=(i.height-t.height)/2,s=(i.width-t.width)/2;this.closeAutoAlign||y.alignNode(this.scroll.content.parent,new g(s,n))}}else if(t.width<i.width){var o=this.scroll.content.parent.getComponent(m);o&&(o.enabled=!1);var a=(i.height-t.height)/2,h=(i.width-t.width)/2;this.closeAutoAlign||y.alignNode(this.scroll.content.parent,new g(h,a))}}},h._getAlign=function(t){if(!f(t)||!f(t.parent))return g.ZERO;var i=y.getNodeSizeWithScale(t.parent),e=t.parent.getComponent(u),n=i.width*e.anchorX,s=i.height*(1-e.anchorY),o=y.getNodeSizeWithScale(t),a=t.getComponent(u),h=t.position.x+n-o.width*a.anchorX,r=s-(1-a.anchorY)*o.height-t.position.y;return new g(h,r)},h._getStartIndex=function(){var t=0;if(this.direction===H.VERTICAL){var i=-this._getAlign(this.scroll.content).height;return(t=Math.ceil((i-this.startPad)/(this._itemSize.height+this.uniformSpace)))<1?0:(t-1)*this._numPerUnit}var e=-this._getAlign(this.scroll.content).width;return(t=Math.ceil((e-this.startPad)/(this._itemSize.width+this.uniformSpace)))<1?0:(t-1)*this._numPerUnit},h._getOneItem=function(){return this._option.getItem()},h._putOneItem=function(t){this._option.releaseItem(t)},h.updateScroll=function(t){var i=this;if(void 0===t&&(t=!1),this._computeDisplayInfo(t),this._startIndex=this._getStartIndex(),this._curShowItems.forEach((function(t,e){var n=i._keyToIndex(e);(-1==n||n<i._startIndex||n>=i._startIndex+i._totalDisplayNum)&&(i._curShowItems.delete(e),n>=0&&(i._datas[n].uiState=t.uiState),i._putOneItem(t))})),!(this._delayUpdateInfo&&this._delayUpdateInfo.updatePerFrame>0))for(var e=0;e<this._totalDisplayNum&&e+this._startIndex<this._datas.length;){var n=e+this._startIndex;this._updateOneItem(n),++e}},h.init=function(t,i){this.clear(),i.resetSpacingCol&&(this.spacingCol=i.resetSpacingCol),i.resetSpacingRow&&(this.spacingRow=i.resetSpacingRow),this._datas=[].concat(t),i.sortFunc&&this._datas.sort(i.sortFunc),this._option=i,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,i.updatePerFrame&&i.updatePerFrame>0?this._delayUpdateInfo={updatePerFrame:i.updatePerFrame}:this._delayUpdateInfo=null,i.extraUnits&&(this._extraUnits=i.extraUnits),this._computeBaseInfo(),this.updateScroll(!0)},h._getItemPosition=function(t){if(this.direction===H.VERTICAL){var i=Math.floor(t/this._numPerUnit),e=Math.floor(t%this._numPerUnit),n=this.paddingLeft+this._marginLeft+e*(this._itemSize.width+this.varyingSpace),s=this.paddingTop+this._marginTop+i*(this._itemSize.height+this.uniformSpace);return S(n,s)}var o=Math.floor(t/this._numPerUnit),a=Math.floor(t%this._numPerUnit),h=this.paddingLeft+this._marginLeft+o*(this._itemSize.width+this.uniformSpace),r=this.paddingTop+this._marginTop+a*(this._itemSize.height+this.varyingSpace);return S(h,r)},h._updateOneItem=function(t){if(t<0||t>=this._datas.length)return!1;var i=!1,e=this._datas[t],n=this._curShowItems.get(e.key);if(n){var s=this._getItemPosition(t);y.alignNode(n.node,new g(s.x,s.y))}else{n=this._getOneItem(),this.scroll.content.addChild(n.node),this._option.onInit(n,e),e.dirty=!1,this._curShowItems.set(e.key,n),n.uiState&&(n.uiState=e.uiState),i=!0;var o=this._getItemPosition(t);y.alignNode(n.node,new g(o.x,o.y))}return e.dirty&&(this._option.onInit(n,e),e.dirty=!1,i=!0),i},h._updateOneExtraUnit=function(t){if(!this._extraUnits||0==this._extraUnits.length)return!1;var i,e=!1;if(this._extraUnits.forEach((function(e){e&&e.index==t&&(i=e)})),i&&f(i.node)){this.scroll.content.addChild(i.node),e=!0;var n=this._getItemPosition(t);this.closeAutoAlign||y.alignNode(i.node,new g(n.x,n.y))}return e},h.itemSize=function(){return this._itemSize},h.contentSize=function(){},h.clear=function(){var t=this;this._datas=[],this._itemSize=g.ZERO,this._delayUpdateInfo=null,this.spacingCol=this._originSpacing.x,this.spacingRow=this._originSpacing.y,this._curShowItems.forEach((function(i,e){i.node.active=!1,t._itemPool.push(i)})),this._curShowItems.clear(),this._itemPool.forEach((function(i){t._option&&t._option.releaseItem&&t._option.releaseItem(i)})),this._itemPool=[],this._extraUnits.forEach((function(t){t&&t.releaseExtra&&t.releaseExtra(t.node)})),this._extraUnits=[]},h.update=function(){if(this._option&&this._delayUpdateInfo&&this._delayUpdateInfo.updatePerFrame>0)for(var t=0,i=0;i<this._totalDisplayNum&&i+this._startIndex<this._datas.length;){var e=i+this._startIndex;if(this._updateOneItem(e)&&++t,++i,t>=this._delayUpdateInfo.updatePerFrame)break}},h.getContentSize=function(){return this.scroll.content.getComponent(u).contentSize},h.getMaskContentSize=function(){return this.scroll.content.parent.getComponent(u).contentSize},a(i,[{key:"numPerUnit",get:function(){return this._numPerUnit}},{key:"totalDisplayNum",get:function(){return this._totalDisplayNum}},{key:"gridDatas",get:function(){return this._datas}},{key:"startPad",get:function(){return this.direction===H.VERTICAL?this.paddingTop+this._marginTop:this.paddingLeft+this._marginLeft}},{key:"endPad",get:function(){return this.direction===H.VERTICAL?this.paddingBottom+this._marginBottom:this.paddingRight+this._marginRight}},{key:"varyingSpace",get:function(){return this.direction===H.VERTICAL?this.spacingCol:this.spacingRow}},{key:"uniformSpace",get:function(){return this.direction===H.VERTICAL?this.spacingRow:this.spacingCol}}]),i}(I)).prototype,"scroll",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(E.prototype,"paddingLeft",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),N=i(E.prototype,"paddingRight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),B=i(E.prototype,"paddingTop",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),D=i(E.prototype,"paddingBottom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),O=i(E.prototype,"spacingRow",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=i(E.prototype,"spacingCol",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=i(E.prototype,"direction",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.VERTICAL}}),G=i(E.prototype,"closeAutoAlign",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=E))||b));h._RF.pop()}}}));

System.register("chunks:///_virtual/UIHelper.ts",["cc","./ViewBaseComponent.ts"],(function(e){"use strict";var t,n,o,i,c,r,a,s;return{setters:[function(e){t=e.cclegacy,n=e.Component,o=e.Node,i=e.isValid,c=e.UITransform,r=e.v2,a=e.Size},function(e){s=e.ViewBaseComponent}],execute:function(){t._RF.push({},"436a5+644dFt7xpPQbf7MF1","UIHelper",void 0);e("uiHelper",function(){function e(){}return e.setActive=function(e,t){void 0===t&&(t=!1),e instanceof n&&e.node?e.node.active=t:e instanceof o&&(e.active=t)},e.alignNode=function(e,t){if(i(e)&&i(e.parent)){var n=e.parent.getComponent(c),o=n.contentSize,a=e.parent.scale,s=r(o.x*a.x,o.y*a.y),p=s.x*n.anchorX,u=s.y*(1-n.anchorY),f=e.getComponent(c),h=f.contentSize,l=e.scale,g=r(h.x*l.x,h.y*l.y),d=f.anchorX*g.x+t.width-p,m=u-((1-f.anchorY)*g.y+t.height);e.setPosition(d,m)}},e.getNodeSizeWithScale=function(e){var t=e.getComponent(c).contentSize,n=e.scale;return new a(t.width*n.x,t.height*n.y)},e.getRootViewComp=function(e){var t=e.getComponent(s);return t||(e.parent?this.getRootViewComp(e.parent):null)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIConfig2.ts","./ResourceLoader.ts","./Logger.ts"],(function(e){"use strict";var n,i,t,o,a,c,r,s,h,u,d;return{setters:[function(e){n=e.createClass},function(e){i=e.cclegacy,t=e.isValid,o=e.UITransform,a=e.Widget,c=e.instantiate},function(e){r=e.uiConfig,s=e.UI_CACHE,h=e.UI_LOADING},function(e){u=e.resourceLoader},function(e){d=e.Logger}],execute:function(){i._RF.push({},"5cd05+kERZHMbeAqeveVfus","UIManager",void 0);var l=[],g=new d("UIManager"),f=function(){function e(){this._cache=new Map}var n=e.prototype;return n.checkCacheValid=function(e){return this._cache.has(e)},n.loadView=function(e){var n=this;return new Promise((function(i,t){var o,a=r.getConfig(e);n._cache.has(e)?i(null==(o=n._cache.get(e))?void 0:o.node):u.load(a.path).then((function(t){var o=c(t);a.cacheMode===s.NODE&&n._cache.set(e,{name:e,node:o}),i(o)})).catch((function(e){t(e)}))}))},n.getLoadingTag=function(e){var n=r.getConfig(e);return n.loading?n.cacheMode===s.NODE&&this.checkCacheValid(e)||u.checkCacheValid(n.path)?h.NONE:n.loading:h.NONE},e}();e("uiManager",new(function(){function e(){this._sceneNode=null,this._pageView=null,this._floatTips=null,this._loadingView=null,this._currScene=null,this._isSwitch=void 0,this._waitingView=null,this._guiCache=new f,this._pageWidth=0,this._pageHeight=0,this._inLoadingScene=null}var i=e.prototype;return i.init=function(e){this._sceneNode=e.sceneNode,this._pageView=e.pageView,this._floatTips=e.tips,this._loadingView=e.loadingView,this._waitingView=e.waitingView},i.loadScene=function(e){for(var n=this,i=arguments.length,t=new Array(i>1?i-1:0),o=1;o<i;o++)t[o-1]=arguments[o];return new Promise((function(i,o){if(n._currScene&&n._currScene.name===e)i(n._currScene.node);else{n._inLoadingScene?o("load scene again!"):(n._inLoadingScene=e,n.loadView.apply(n,[e,n._sceneNode].concat(t)).then((function(e){var t;n._currScene&&n._currScene.closeView(),t=e.node.name,n._sceneNode.children.forEach((function(e){e.name!=t&&-1===l.indexOf(e.name)&&g.warn("残留节点 name = ",e.name)})),n._currScene=e,n._inLoadingScene=null,i(e.node)})).catch((function(i){n._inLoadingScene=null,g.error("loadScene name = "+e+" failed. err = ",i),n.showTips(i),o(i)})))}}))},i.showLoading=function(e){var n;this._isSwitch=!0,null==(n=this._loadingView)||n.show(e)},i.hideLoading=function(){var e;this._isSwitch=!1,null==(e=this._loadingView)||e.hide()},i.showWaiting=function(e){this._waitingView&&this._waitingView.show(e)},i.hideWaiting=function(){this._waitingView&&this._waitingView.hide()},i.preloadView=function(e){return this._guiCache.loadView(e)},i.loadView=function(e,n){for(var i=this,t=arguments.length,c=new Array(t>2?t-2:0),u=2;u<t;u++)c[u-2]=arguments[u];return n=n||this._sceneNode,g.debug("loadView. name = "+e),new Promise((function(t,u){var d,l,f=r.getConfig(e),w=i._guiCache.getLoadingTag(e),_=function(e){e===h.LOADING?i.hideLoading():e===h.WAITING&&i.hideWaiting()};l=function(){i._guiCache.loadView(e).then((function(r){var h=r,d=null;if(d=f.component?h.getComponent(f.component):h.getComponent("ViewBaseComponent"),f.isPage){if(!i._pageWidth){var l=i._pageView.getComponent(o);i._pageWidth=l.width,i._pageHeight=l.height}var p=h.getComponent(a);p&&p.destroy();var V=h.getComponent(o);V.width=i._pageWidth,V.height=i._pageHeight,i._pageView.addPage(h)}else f.cacheMode===s.NODE?d.attachToNode(n,e):n.addChild(h);if(d){var m,v=(m=d).initViewBaseComponent.apply(m,[e].concat(c));"boolean"==typeof v?(_(w),t(d)):v.then((function(){_(w),t(d)}))}else{_(w);var C="Can not find Component for View name = "+e;g.error(C),u(C)}})).catch((function(n){_(w),g.error("loadView name = "+e+" failed. err = ",n),u(n)}))},(d=w)===h.LOADING?i.showLoading((function(){l()})):d===h.WAITING?i.showWaiting((function(){l()})):l()}))},i.releaseView=function(e){if(e.isSharedView())g.warn("SharedView no need to release. name = "+e.name);else if(e.isViewValid()){g.info("releaseView name = "+e.name);var n=e.uiInfo;e.releaseViewBaseComponent(),n.cacheMode!==s.NODE?(e.node.removeFromParent(),e.node.destroy(),u.release(n.path)):e.node.removeFromParent()}},i.checkViewOpenInScene=function(e,n){return this._findHierarchyChild(e,t(n)?n:this._sceneNode)},i.showLockTips=function(){this.showTips("敬请期待，尚未开放")},i.showTips=function(e,n){var i;void 0===n&&(n=0),null==(i=this._floatTips)||i.show(e,n)},i.showMessageBox=function(e){return this.loadView("MessageBoxView",this._sceneNode,e)},i.closeMessageBox=function(e){var n=this;this._sceneNode&&this._sceneNode.children.filter((function(n){return n.name===(e||"MessageBoxView")})).forEach((function(e){var i=e.getComponent("MessageBoxView");i&&n.releaseView(i)}))},i.currScene=function(){return this._currScene.name},i.isSwitch=function(){return this._isSwitch},i._findHierarchyChild=function(e,n){if(!n)return null;if(0==n.children.length)return null;if(n.getChildByName(e))return n.getChildByName(e);for(var i=0;i<n.children.length;i++){var t=this._findHierarchyChild(e,n.children[i]);if(t)return t}return null},n(e,[{key:"sceneNode",get:function(){return this._sceneNode}}]),e}()));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIScrollSelect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,s,n,h,o,l,c,r,a,u,d,p,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){h=t.cclegacy,o=t._decorator,l=t.Node,c=t.Button,r=t.CCInteger,a=t.CCFloat,u=t.EventHandler,d=t.v3,p=t.UITransform,v=t.Component}],execute:function(){var g,f,T,_,y,b,S,x,m,E,I,X,C,L,M,R,O,A,B,U,P,N;t("EventType",void 0),h._RF.push({},"372a8gTYRJFe7SfjbwVorA7","UIScrollSelect",void 0);var z,w=o.ccclass,D=o.property;!function(t){t[t.SCROLL_START=0]="SCROLL_START",t[t.SCROLL_ING=1]="SCROLL_ING",t[t.SCROLL_END=2]="SCROLL_END"}(z||(z=t("EventType",{})));t("UIScrollSelect",(g=w("UIScrollSelect"),f=D(l),T=D({tooltip:"是否无限翻页"}),_=D({type:c,tooltip:"左边按钮",visible:function(){return!this.circlePage}}),y=D({type:c,tooltip:"右边按钮",visible:function(){return!this.circlePage}}),b=D({type:r,tooltip:"单个控件之间的距离"}),S=D({type:a,tooltip:"中心点的缩放比例"}),x=D({type:a,tooltip:"边缘点的缩放比例"}),m=D({type:a,tooltip:"滚动时的速度"}),E=D({type:u,tooltip:"选择后的回调"}),g(((N=function(t){function i(){for(var i,e=arguments.length,h=new Array(e),o=0;o<e;o++)h[o]=arguments[o];return i=t.call.apply(t,[this].concat(h))||this,s(i,"content",C,n(i)),s(i,"circlePage",L,n(i)),s(i,"leftBtn",M,n(i)),s(i,"rightBtn",R,n(i)),s(i,"deltaX",O,n(i)),s(i,"centerScale",A,n(i)),s(i,"minScale",B,n(i)),s(i,"scrollSpeed",U,n(i)),s(i,"selectEvents",P,n(i)),i.childs=[],i.isTouching=!1,i.hasTouchMove=!1,i.isTestX=!1,i._touchId=null,i.currentIndex=0,i._toMoveX=1,i.dx=0,i.moveAim=0,i}e(i,t);var h=i.prototype;return h.onLoad=function(){this.childs=[];for(var t=0;t<this.content.children.length;t++)this.childs[t]=this.content.children[t],this.childs[t].position=d(this.deltaX*(t-1),this.childs[t].position.y,0);this.isTouching=!1,this.hasTouchMove=!1,this.isTestX=!1,this._touchId=null,this.scrollTo(0,!1)},h.scrollTo=function(t,i){if(void 0===i&&(i=!0),t<0&&t>=this.childs.length)return console.error(this.node.name+"->移动超出边界面");if(this.currentIndex=t,this.moveAim=t,i)this.isTestX=!0,u.emitEvents(this.selectEvents,{target:this,type:z.SCROLL_START,index:this.currentIndex});else for(var e=0;e<this.childs.length;e++)this._checkChildX(this.childs[e],(e-t)*this.deltaX)},h.scrollToLeft=function(){this._toMoveX=1,this.scrollTo((this.currentIndex-1+this.childs.length)%this.childs.length),this._setPageBtnsStatus()},h.scrollToRight=function(){this._toMoveX=-1,this.scrollTo((this.currentIndex+1+this.childs.length)%this.childs.length),this._setPageBtnsStatus()},h._setPageBtnsStatus=function(){var t=this.currentIndex>=this.childs.length-1;!this.circlePage&&t?(console.log("已经到了最右边",this.currentIndex),this.rightBtn&&(this.rightBtn.interactable=!1)):this.rightBtn&&(this.rightBtn.interactable=!0);var i=this.currentIndex<=0;!this.circlePage&&i?(console.log("已经到了最左边",this.currentIndex),this.leftBtn&&(this.leftBtn.interactable=!1)):this.leftBtn&&(this.leftBtn.interactable=!0)},h._checkChildX=function(t,i){this.circlePage&&(i>this.childs.length/2*this.deltaX?i-=this.childs.length*this.deltaX:i<-this.childs.length/2*this.deltaX&&(i+=this.childs.length*this.deltaX)),t.position=d(i,t.position.y,t.position.z);var e=(1-Math.min(Math.abs(i),this.deltaX)/this.deltaX)*(this.centerScale-this.minScale)+this.minScale;t.scale=d(e,e,1)},h.start=function(){this.content.on(l.EventType.TOUCH_START,this._onTouch,this),this.content.on(l.EventType.TOUCH_MOVE,this._onTouch,this),this.content.on(l.EventType.TOUCH_END,this._onTouchEnd,this),this.content.on(l.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},h._onTouch=function(t){if(null==this._touchId||t.touch==this._touchId)if(t.type!=l.EventType.TOUCH_START){this.hasTouchMove=!0;var i=t.getUILocation().x-this.dx;this._move(i),this.dx=t.getUILocation().x;var e={target:this,type:z.SCROLL_ING,dx:this.dx};u.emitEvents(this.selectEvents,e)}else{this.isTouching=!0,this.hasTouchMove=!1,this.isTestX=!1,this._touchId=t.touch,this.dx=t.getUIStartLocation().x;var s={target:this,type:z.SCROLL_START,index:this.currentIndex};u.emitEvents(this.selectEvents,s)}},h._isMoveEdge=function(){return{left:this.childs[0].position.x>=0,right:this.childs[this.childs.length-1].position.x<=0}},h._onTouchEnd=function(t){if(null==this._touchId||t.touch==this._touchId){if(this.isTouching=!1,t.type!=l.EventType.TOUCH_END&&t.type!=l.EventType.TOUCH_CANCEL||(this._touchId=null),!this.circlePage){var i=this._isMoveEdge();if(i.right)return void console.log("最右边 无法动");if(i.left)return void console.log("最左边 无法动")}var e=this.node.getComponent(p).convertToNodeSpaceAR(t.getUILocation());if(this.hasTouchMove){for(var s=this.deltaX,n=0,h=0;h<this.childs.length;h++)Math.abs(this.childs[h].position.x)<=s&&(s=Math.abs(this.childs[h].position.x),n=h);this.moveAim=n,this._toMoveX=this.childs[n].position.x>=0?-1:1,this.isTestX=!0}else{var o=Math.ceil((e.x-this.deltaX/2)/this.deltaX);if(0===o){var c={target:this,type:z.SCROLL_END,index:this.currentIndex};u.emitEvents(this.selectEvents,c)}else this.moveAim=(this.currentIndex+o+this.childs.length)%this.childs.length,this._toMoveX=o>0?-1:1,this.isTestX=!0}}},h._move=function(t){if(0!==t){if(!this.circlePage){var i=this._isMoveEdge();if(t<0&&i.right)return void console.log("最右边 无法动");if(t>0&&i.left)return void console.log("最左边 无法动")}for(var e=0;e<this.childs.length;e++)this._checkChildX(this.childs[e],this.childs[e].position.x+t)}},h.update=function(t){if(!this.isTouching&&this.isTestX){for(var i=this._toMoveX*t*this.scrollSpeed,e=this.childs[this.moveAim].position.x,s=0;s<this.childs.length;s++)this._checkChildX(this.childs[s],this.childs[s].position.x+i);var n=this.childs[0].position.x,h=Math.round(n/this.deltaX),o=this.deltaX*h,l=this.childs[this.moveAim].position.x;if(e*l<0&&Math.abs(l)<this.deltaX){this.isTestX=!1;for(var c=0;c<this.childs.length;c++)if(Math.abs(this.childs[c].position.x)<=Math.abs(i)){this.currentIndex=c;break}for(var r=0;r<this.childs.length;r++)this._checkChildX(this.childs[r],this.childs[r].position.x+o-n);var a={target:this,type:z.SCROLL_END,index:this.currentIndex};u.emitEvents(this.selectEvents,a)}}},i}(v)).EventType=z,C=i((X=N).prototype,"content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(X.prototype,"circlePage",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),M=i(X.prototype,"leftBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(X.prototype,"rightBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(X.prototype,"deltaX",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),A=i(X.prototype,"centerScale",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=i(X.prototype,"minScale",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=i(X.prototype,"scrollSpeed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),P=i(X.prototype,"selectEvents",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=X))||I));h._RF.pop()}}}));

System.register("chunks:///_virtual/ViewBaseComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./StepWork.ts","./UIConfig2.ts","./UIManager.ts"],(function(e){"use strict";var n,t,i,o,r,s,u,a,c,h,f;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){i=e.cclegacy,o=e._decorator,r=e.isValid,s=e.Component},function(e){u=e.logger},function(e){a=e.StepWork},function(e){c=e.uiConfig,h=e.UI_CACHE},function(e){f=e.uiManager}],execute:function(){var l;i._RF.push({},"302b2Wbp4dOUICoETm0Q/tE","ViewBaseComponent",void 0);var d=o.ccclass;o.property,e("ViewBaseComponent",d("ViewBaseComponent")(l=function(e){function i(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this)._subView=[],n._uiInfo=null,n._stepWork=new a,n._enterCounter=0,n}n(i,e);var o=i.prototype;return o.initViewBaseComponent=function(e){this._uiInfo=c.getConfig(e),this._enterCounter++;for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return this.onInit.apply(this,t),this._checkAndExecStepWork()},o.isViewValid=function(){return null!=this._uiInfo&&r(this.node)},o.isSharedView=function(){return this.isViewValid()&&this._uiInfo.cacheMode===h.NODE},o.releaseViewBaseComponent=function(){this.onRelease(),this._uiInfo=null},o.onDestroy=function(){},o.closeView=function(){this.isSharedView()?this._sharedViewClose():f.releaseView(this)},o.loadSubView=function(e){for(var n=this,t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return new Promise((function(t,o){c.getConfig(e).cacheMode===h.NODE?o("Shared View should load by uiManager.loadView"):f.loadView.apply(f,[e,n.node].concat(i)).then((function(e){n._subView.push(e),t(e)})).catch((function(e){o(e)}))}))},o.releaseSubView=function(){this._subView.forEach((function(e){f.releaseView(e)})),this._subView=[]},o.onInit=function(){u.warn("ViewBaseComponent","need overwrite onInit for view "+this.name)},o.onRelease=function(){},o.addStepTask=function(e,n,t){return void 0===n&&(n="defaultTask"),void 0===t&&(t=0),this._stepWork.addTask(e,n,t),this},o._checkAndExecStepWork=function(){var e=this;return 0===this._stepWork.length||new Promise((function(n,t){e._stepWork.start((function(){n(!0)}))}))},o._sharedViewClose=function(){this.isSharedView()&&r(this.node.parent)&&(this.releaseViewBaseComponent(),this.node.removeFromParent())},o._getSpriteFrame=function(e,n){if(!(n instanceof Array))return null;for(var t=0;t<n.length;t++){var i=n[t];if(i.name==e)return i}return null},o.attachToNode=function(e,n){this._uiInfo&&this._uiInfo.cacheMode!==h.NODE?u.error("ViewBaseComponent","You cant not call this function while view is not sharedView"):(this._sharedViewClose(),e.addChild(this.node),this.node.name=n)},t(i,[{key:"enterCount",get:function(){return this._enterCounter}},{key:"uiInfo",get:function(){return this._uiInfo}},{key:"name",get:function(){return this._uiInfo?this._uiInfo.id:"unknownView"}},{key:"stepWork",get:function(){return this._stepWork}}]),i}(s))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualPageView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemPage.ts"],(function(t){"use strict";var e,i,n,a,s,h,o;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,a=t.UITransform,s=t.Widget,h=t.PageView},function(t){o=t.ItemPage}],execute:function(){var g;i._RF.push({},"93239Zu+iNGQYlyTXjtl94i","VirtualPageView",void 0);var r=n.ccclass;n.property,t("VirtualPageView",r("VirtualPageView")(g=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._maxItemCount=3,e._maxPageCount=50,e._pageHeight=0,e._curPageIndex=0,e._lastPageIndex=-1,e._curSelectItemIndex=0,e._listData=[{bg:"",moduleName:"1"},{bg:"",moduleName:"2"},{bg:"",moduleName:"3"},{bg:"",moduleName:"4"},{bg:"",moduleName:"4"},{bg:"",moduleName:"4"},{bg:"",moduleName:"4"},{bg:"",moduleName:"4"},{bg:"",moduleName:"4"},{bg:"",moduleName:"4"},{bg:"",moduleName:"4"},{bg:"",moduleName:"4"}],e}e(i,t);var n=i.prototype;return n.onInit=function(){this._pageHeight=this.view.contentSize.y,this._maxItemCount=this.content.children.length,this.initPage(),this.updateEnabeld(),this.node.off("page-turning",this.onPageTurning,this),this.node.on("page-turning",this.onPageTurning,this)},n.onReset=function(){this._curPageIndex=0,this._lastPageIndex=-1,this._curSelectItemIndex=0,this.initPage(),this._pages.length=0,this._updatePageView()},n.clearData=function(){this._listData.length=0,this.onReset()},n.initPage=function(){var t=this;if(this.content.children.forEach((function(e,i){e.getComponent(a).height=t.view.height,e.setPosition(0,-(t._pageHeight/2+i*t._pageHeight)),e.getComponentsInChildren(s).forEach((function(t){return t.updateAlignment()}));var n=e.getComponent(o);n.removeUI(),t._listData[i]&&t.setItemDataByIndex(n,i)})),this._listData.length>this._maxItemCount)for(var e=this._maxItemCount;e<this._listData.length;e++)this.addPageData(!1);this.setContentSize()},n.setContentSize=function(){this.content.getComponent(a).height=this._pageHeight*Math.min(this._listData.length,this._maxPageCount)},n.pageToUp=function(){if(this.isOpenVirtual()&&0!==this._curPageIndex){var t=this.content.children[this._curSelectItemIndex],e=this.nextUpIndex(),i=this.content.children[e],n=i.getComponent(o);i.setPosition(0,t.position.y+this._pageHeight),this.setItemDataByIndex(n,this._curPageIndex-1)}},n.pageToDown=function(t){if(void 0===t&&(t=!1),t||this.isOpenVirtual()&&!(this._curPageIndex>=Math.min(this._listData.length,this._maxPageCount)-1)){var e=this.content.children[this._curSelectItemIndex],i=this.nextDownIndex(),n=this.content.children[i],a=n.getComponent(o);n.setPosition(0,e.position.y-this._pageHeight),this.setItemDataByIndex(a,this._curPageIndex+1)}},n.setItemDataByIndex=function(t,e){t.itemIndex=e,t.data=this._listData[e],this._pages[e]=t.node},n.onPageTurning=function(t){this._lastPageIndex!==this._curPageIndex&&(this._lastPageIndex=this._curPageIndex,this._curPageIndex=this.curPageIdx,this.curPageIdx>this._lastPageIndex?(this._curSelectItemIndex=this.nextDownIndex(),this.pageToDown()):(this._curSelectItemIndex=this.nextUpIndex(),this.pageToUp()))},n.nextDownIndex=function(){var t=this._curSelectItemIndex+1;return t>this._maxItemCount-1&&(t=0),t},n.nextUpIndex=function(){var t=this._curSelectItemIndex-1;return t<0&&(t=this._maxItemCount-1),t},n.addListData=function(t){this._listData.push(t),this.updateEnabeld(),this.addPageData()},n.addPageData=function(t){void 0===t&&(t=!0),this._pages.length<this._listData.length&&this._pages.push(null),this._curPageIndex===this._listData.length-2&&this.pageToDown(!0),t&&this.setContentSize(),console.log("总页数",this._pages.length)},n.updateEnabeld=function(){this.enabled=this._listData.length>1},n.isOpenVirtual=function(){return this._listData.length>this._maxItemCount},n._updatePageView=function(){if(this.content){var t=this._pages.length;this._curPageIdx>=t&&(this._curPageIdx=0===t?0:t-1,this._lastPageIdx=this._curPageIdx);for(var e=this._initContentPos,n=0;n<t;++n)if(this.direction===i.Direction.Horizontal){var a=this._pages[n].position;this._scrollCenterOffsetX[n]=Math.abs(e.x+a.x)}else{var s=-(this._pageHeight/2+this._curPageIndex*this._pageHeight);this._scrollCenterOffsetY[n]=Math.abs(e.y+s)}}},n._updateAllPagesSize=function(){var t=this.view;if(this.content&&t&&this._sizeMode===i.SizeMode.Unified)for(var e=this.content.children,n=t.contentSize,a=0,s=e.length;a<s;a++)e[a]._uiProps.uiTransformComp.setContentSize(n)},i}(h))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/WaitingView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){var r;e._RF.push({},"5e354OyJWpKHZvCAay0BJ9W","WaitingView",void 0);var c=n.ccclass;n.property,t("WaitingView",c("WaitingView")(r=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.show=function(t){this.node.active=!0,t&&t()},n.hide=function(){this.node.active=!1},e}(o))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/WatcherComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(e){"use strict";var t,n,r,o,s,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.Node,s=e.Component},function(e){a=e.logger}],execute:function(){var i;n._RF.push({},"6cae8G96y9E1JNdoX/s2yPK","WatcherComponent",void 0);var h=r.ccclass;r.property,e("default",h(i=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._watchers=new Map,t._destroyHandler=null,t._listenedChildren=!1,t}t(n,e);var r=n.prototype;return r.onDisable=function(){var e=this;this._watchers.forEach((function(t,n){t.onDisable(),t.keepAfterCall||e._watchers.delete(n)})),this.node.off(o.EventType.CHILD_REMOVED,this._onChildrenRemoved,this),this._destroyHandler&&this._destroyHandler(this.node.uuid),this.destroy()},r.setDestroyHandler=function(e){this._destroyHandler=e},r.addWatcher=function(e,t){this._watchers.has(e)&&a.warn("key = "+e+" already exits. parent = "+t.parent.name),this._watchers.set(e,t),this._listenedChildren||(this.node.on(o.EventType.CHILD_REMOVED,this._onChildrenRemoved,this),this._listenedChildren=!0)},r.removeWatcher=function(e){this._watchers.delete(e)},r._onChildrenRemoved=function(e){var t=this,n=new Map;this._watchers.forEach((function(e,t){n.set(t,e)}));var r=[];n.forEach((function(t,n){t.node===e&&(t.onDisable(),a.warn("WatcherHelper","Parent has changed. watcher on disable. node = "+e.name),t.keepAfterCall||r.push(n))})),r.forEach((function(e){t._watchers.delete(e)}))},n}(s))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/WatcherHelper.ts",["cc","./WatcherComponent.ts"],(function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.isValid},function(e){r=e.default}],execute:function(){t._RF.push({},"de335ukLApFJ6LShZEG88+U","WatcherHelper",void 0);var u=new Map;e("WatcherHelper",function(){function e(){}return e.addWatcher=function(e){var t=e.node.uuid,n=e.parent.getComponent(r);return n||(n=e.parent.addComponent(r),u.set(e.parent.uuid,n),n.setDestroyHandler((function(e){u.delete(e)}))),n.addWatcher(t,e),t},e.removeWatcher=function(e){if(n(e)&&n(e.parent)){var t=e.parent.getComponent(r);t&&t.removeWatcher(e.uuid)}},e.removeWatcherOnNode=function(e){u.forEach((function(t,r){!function(t){for(var r=t.node;n(r);){if(r.uuid===e.uuid)return t.enabled=!1,!0;r=r.parent}}(t)}))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/WebsocketRequest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(e){"use strict";var t,o,n,s;return{setters:[function(e){t=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){n=e.cclegacy},function(e){s=e.logger}],execute:function(){n._RF.push({},"609161StDtNc5amyKenjSgS","WebsocketRequest",void 0);e("default",function(){function e(){this._socket=void 0}var n=e.prototype;return n.connect=function(){var e=t(o().mark((function e(t,n,c,r,u,i){var k=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){k.close(),k._socket=new WebSocket(t),s.debug("websocket connect: "+t),k._socket.binaryType=n,k._socket.onopen=function(t){s.debug("websocket-open",t.type),r&&r(t.type),e(!0)},k._socket.onclose=function(t){s.debug("websocket-close",t.code),u&&u(t.code),e(!1)},k._socket.onerror=function(t){s.debug("websocket-error",t.type),i&&i(t.type),e(!1)},k._socket.onmessage=function(e){c&&c(e.data)}})));case 1:case"end":return e.stop()}}),e)})));return function(t,o,n,s,c,r){return e.apply(this,arguments)}}(),n.close=function(){this._socket?(this._socket.onopen=null,this._socket.onclose=null,this._socket.onerror=null,this._socket.onmessage=null,this._socket.close(),s.debug("websocket do close")):s.debug("websocket is not init"),this._socket=null},n.isOpen=function(){return!!this._socket&&this._socket.readyState===WebSocket.OPEN},n.send=function(e){this._socket&&this.isOpen()?this._socket.send(e):s.debug("websocket is not open")},e}());n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});