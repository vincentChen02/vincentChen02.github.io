System.register("chunks:///_virtual/AppConst.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d11a72YoOJKY44ku5JGBNj/","AppConst",void 0);var p=t("mapItemWidth",88),a=t("mapItemHeight",215),s=t("mapItemSpaceX",2),m=t("mapItemSpaceY",5),n=t("mapItemCol",6),r=t("mapItemRow",5),o=(t("mapTotalCount",n*r),t("mapItemAddSpaceWidth",p+s)),c=t("mapItemAddSpaceHeight",a+m),d=(t("mapMaxWidth",o*n),t("mapMaxHeight",c*r),t("stepMap",[{step:1,start:1,end:1},{step:5,start:1,end:3},{step:10,start:2,end:4},{step:20,start:3,end:6},{step:30,start:4,end:7}]),t("typeCount",5));t("typeUniversal",d-1),t("typeColor",["红","黄","绿","蓝","万"]),t("listCardCount",5);e._RF.pop()}}}));

System.register("chunks:///_virtual/AppType.ts",["cc"],(function(){"use strict";var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"668ccmU2jhLn5cCx3Yhdwwl","AppType",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppConst.ts","./Utils.ts"],(function(t){"use strict";var r,e,a,n,s,i,u,o,c,p,h;return{setters:[function(t){r=t.createClass},function(t){e=t.cclegacy,a=t.director},function(t){n=t.mapItemRow,s=t.mapItemCol,i=t.listCardCount,u=t.typeCount,o=t.typeUniversal,c=t.mapTotalCount,p=t.stepMap},function(t){h=t.default}],execute:function(){e._RF.push({},"d1bccIZC2BPMZZAQS6cjB5X","DataManager",void 0);t("dataManager",new(function(){function t(){this.step=0,this.curListCount=0,this.dataArr=[],this._score=0}var e=t.prototype;return e.init=function(){this.dataArr.length=0;for(var t=0;t<n;t++)for(var r=0;r<s;r++)this.dataArr.push({type:-1,num:0,x:r,y:t,idx:r+t*s})},e.addStep=function(){this.step++;for(var t=1===this.step?i:i-1,r=this.getCfg(this.step),e=[],a=0;a<t;a++){var n={type:h.getRandom(0,u-1),num:h.getRandom(r.start,r.end)};e.push(n),console.log("步数:",this.step,n)}return this.curListCount=i,e},e.reduceListCount=function(t){this.curListCount--,1===this.curListCount&&a.emit("createCard");var r=t.idx%s==0||t.idx>=(n-1)*s,e=this.dataArr[t.idx];return e.type=t.type,e.num=t.num+(!h.isUniversalCard(t.type)&&r?1:0),e.num},e.placeItem=function(t){var r=this,e=[],a=[t];if(this.ergodicData(t,a),a.length<=1){var n=this.dataArr[t];return n.type===o&&(n.num=0,n.type=-1,e.push(n)),e}return a.forEach((function(t){r.dataArr[t].num--,r.score++,(r.dataArr[t].num<=0||r.dataArr[t].type===o)&&(r.dataArr[t].num=0,r.dataArr[t].type=-1),e.push(r.dataArr[t])})),e},e.ergodicData=function(t,r){var e=this,a=this.getFourSidesIdx(t,r);0!==a.length&&a.forEach((function(t){return e.ergodicData(t,r)}))},e.getFourSidesIdx=function(t,r){var e=[],a=t+s;a<c&&this.sameCard(t,a)&&h.pushToArr(r,a)&&e.push(a);var n=t-s;n>=0&&this.sameCard(t,n)&&h.pushToArr(r,n)&&e.push(n);var i=t-1;i>=0&&i%s>0&&this.sameCard(t,i)&&h.pushToArr(r,i)&&e.push(i);var u=t+1;return u<c&&u%s!=s-1&&this.sameCard(t,u)&&h.pushToArr(r,u)&&e.push(u),e},e.sameCard=function(t,r){var e=this.dataArr[t],a=this.dataArr[r],n=e.num===a.num,s=e.type===a.type||e.type===o||a.type===o;return n&&s},e.getCfg=function(t){for(var r=0;r<p.length;r++){var e=p[r];if(t<=e.step)return e}return p[p.length-1]},r(t,[{key:"score",get:function(){return this._score},set:function(t){this._score=t,a.emit("updateScore")}}]),t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalManager.ts","./Utils.ts","./DataManager.ts","./AppConst.ts","./MoveItem.ts"],(function(t){"use strict";var e,n,o,i,r,a,c,s,u,l,d,h,p,f,b,v,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,s=t.Prefab,u=t.Label,l=t.director,d=t.instantiate,h=t.Component},function(t){p=t.globalManager},function(t){f=t.default},function(t){b=t.dataManager},function(t){v=t.listCardCount},function(t){C=t.MoveItem}],execute:function(){var g,y,m,_,T,E,M,N,w,L,P;r._RF.push({},"20370AdirlNx7B0OQ0xidWo","GameView",void 0);var S=a.ccclass,U=a.property;t("GameView",(g=S("GameView"),y=U(c),m=U(c),_=U(s),T=U(u),g((N=e((M=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"mapNode",N,i(e)),o(e,"listNode",w,i(e)),o(e,"cardPrefab",L,i(e)),o(e,"scoreLabel",P,i(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){p.init(this.node,this.mapNode),this.onInit()},r.onInit=function(){this.onEvent(),b.init(),this.onCreateCard(),this.onUpdateScore()},r.onEvent=function(){l.on("createCard",this.onCreateCard,this),l.on("updateScore",this.onUpdateScore,this),this.node.on(c.EventType.TOUCH_START,this._touchStart,this),this.node.on(c.EventType.TOUCH_MOVE,this._touchMove,this),this.node.on(c.EventType.TOUCH_END,this._touchEnd,this),this.node.on(c.EventType.TOUCH_CANCEL,this._touchCancel,this)},r.onCreateCard=function(){for(var t=b.addStep(),e=0,n=0;n<v;n++){var o=this.listNode.children[n];if(!(o.children.length>0)){var i=d(this.cardPrefab);o.addChild(i),i.getComponent(C).setData(t[e]),e++}}},r.onUpdateScore=function(){this.scoreLabel.string=""+b.score},r._touchStart=function(t){var e=t.touch.getUILocation();console.log("clickPos",f.countPosToDirectIndex(e.x,e.y),f.countPosToDataIndex(e.x,e.y))},r._touchMove=function(t){},r._touchEnd=function(t){},r._touchCancel=function(t){},e}(h)).prototype,"mapNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(M.prototype,"listNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(M.prototype,"cardPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(M.prototype,"scoreLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=M))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalManager.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8bf149iqkJBcIiuifcR5jdI","GlobalManager",void 0);t("globalManager",new(function(){function t(){this.rootNode=null,this.mapNode=null}var e=t.prototype;return e.init=function(t,e){this.rootNode=t,this.mapNode=e},e.getMapItem=function(t){return this.mapNode.children[t]},e.getRootNode=function(){return this.rootNode},e.setParent=function(t){t.setParent(this.rootNode)},t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameView.ts","./MoveItem.ts","./AppConst.ts","./AppType.ts","./DataManager.ts","./GlobalManager.ts","./Utils.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MoveItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalManager.ts","./Utils.ts","./DataManager.ts","./AppConst.ts"],(function(t){"use strict";var e,n,o,i,s,a,h,r,c,u,l,d,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,h=t.Label,r=t.Node,c=t.Component},function(t){u=t.globalManager},function(t){l=t.default},function(t){d=t.dataManager},function(t){f=t.typeUniversal,p=t.typeColor}],execute:function(){var v,_,m,y,E;s._RF.push({},"1b2b7QWMyZEhoamNTz2AhtP","MoveItem",void 0);var T=a.ccclass,g=a.property;t("MoveItem",(v=T("MoveItem"),_=g(h),v((E=e((y=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(e,"lb_num",E,i(e)),e.oldParent=null,e.data=null,e}n(e,t);var s=e.prototype;return s.onLoad=function(){this.onEvent()},s.onEvent=function(){this.node.on(r.EventType.TOUCH_START,this._touchStart,this),this.node.on(r.EventType.TOUCH_MOVE,this._touchMove,this),this.node.on(r.EventType.TOUCH_END,this._touchEnd,this),this.node.on(r.EventType.TOUCH_CANCEL,this._touchCancel,this)},s.removeEvent=function(){this.node.off(r.EventType.TOUCH_START,this._touchStart,this),this.node.off(r.EventType.TOUCH_MOVE,this._touchMove,this),this.node.off(r.EventType.TOUCH_END,this._touchEnd,this),this.node.off(r.EventType.TOUCH_CANCEL,this._touchCancel,this)},s.setData=function(t){this.data=t,this.setNum()},s.reduceNum=function(t){this.data.num=t,t<=0||this.data.type===f?(this.node.removeFromParent(),this.node.destroy()):this.setNum()},s.setNum=function(){this.lb_num.string=this.data.num+"\n"+p[this.data.type]},s._touchStart=function(t){console.log("start",t),this.oldParent=this.node.parent,u.setParent(this.node);var e=t.touch.getUILocation();this._setPosition(e.x,e.y)},s._touchMove=function(t){var e=t.touch.getUILocation();this._setPosition(e.x,e.y)},s._touchEnd=function(t){console.log("end",t);var e=t.touch.getUILocation(),n=l.countPosToDataIndex(e.x,e.y);if(console.log("当前位置下标",n),this._setPosition(0,0),n<0)this.node.setParent(this.oldParent);else{var o=u.getMapItem(n),i=0===o.children.length;this.node.setParent(i?o:this.oldParent),i&&this.onSuc(n)}},s._touchCancel=function(t){this._setPosition(0,0),this.node.setParent(this.oldParent)},s._setPosition=function(t,e){this.node.setPosition(t,e)},s.onSuc=function(t){this.removeEvent(),this.data.idx=t;var n=d.reduceListCount(this.data);this.data.num!==n&&(this.data.num=n,this.setNum()),d.placeItem(t).forEach((function(t){var n=u.getMapItem(t.idx);n&&n.children.length>0&&n.children[0].getComponent(e).reduceNum(t.num)}))},e}(c)).prototype,"lb_num",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc","./AppConst.ts"],(function(t){"use strict";var n,e,o,r,i,u,c;return{setters:[function(t){n=t.cclegacy},function(t){e=t.mapMaxWidth,o=t.mapMaxHeight,r=t.mapItemCol,i=t.typeUniversal,u=t.mapItemAddSpaceWidth,c=t.mapItemAddSpaceHeight}],execute:function(){n._RF.push({},"0a389G/WdpGUoD6oUv/crli","Utils",void 0);t("default",function(){function t(){}return t.countPosToDataIndex=function(t,n){if(t>e||n>o)return-1;var i=this.countPosToDirectIndex(t,n);return i.idx_x+i.idx_y*r},t.countPosToDirectIndex=function(t,n){return{idx_x:Math.floor(t/u),idx_y:Math.floor(n/c)}},t.getRandom=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},t.pushToArr=function(t,n){return t.indexOf(n)<0&&(t.push(n),!0)},t.isUniversalCard=function(t){return t===i},t}());n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});